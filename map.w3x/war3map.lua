udg_QuestIntro = nil
udg_IntLightCheck = 0
udg_Cat = 0
udg_Random = 0
udg_mainHero = nil
udg_IsRatBlocked = false
udg_ActiveGrave = nil
gg_rct_Intro_Trap = nil
gg_rct_Bandits1 = nil
gg_rct_Bandits2 = nil
gg_rct_Bandits_Barkeep = nil
gg_rct_Button_1 = nil
gg_rct_WallHide = nil
gg_rct_Button_2 = nil
gg_rct_Solve3 = nil
gg_rct_Camera_fix = nil
gg_rct_Region_011 = nil
gg_rct_KainStart = nil
gg_rct_KotoBogSpawn2 = nil
gg_rct_Region_014 = nil
gg_rct_EnterDark_2 = nil
gg_rct_Region_016 = nil
gg_rct_KotoBogPortal = nil
gg_rct_Region_018 = nil
gg_rct_Graveyard = nil
gg_rct_Tumbler1 = nil
gg_rct_Tumbler2 = nil
gg_rct_Tumbler3 = nil
gg_rct_LibraryPass = nil
gg_rct_LibraryPass_2 = nil
gg_rct_ButtonToLibrary = nil
gg_rct_Rat_Leave_Zone = nil
gg_rct_Rat_Start_Zone = nil
gg_rct_Region_028 = nil
gg_rct_Rat_Barrel_Zone = nil
gg_rct_Bergi_Run_Away = nil
gg_rct_BergiFinish = nil
gg_rct_Cinematic_1 = nil
gg_rct_Cinematic2 = nil
gg_rct_Cry1 = nil
gg_rct_Cry2 = nil
gg_rct_DoorwayOpen = nil
gg_rct_DoorwayOpen2 = nil
gg_rct_DoorwayOpen3 = nil
gg_rct_LibraryOpen = nil
gg_rct_LibraryClosed = nil
gg_rct_DoorwayOpen4 = nil
gg_rct_Portal_2_Out = nil
gg_rct_Portal1_In = nil
gg_rct_Cry3 = nil
gg_rct_Barkeep_walk = nil
gg_rct_RedKeyDoor = nil
gg_rct_Grave1 = nil
gg_rct_Grave2 = nil
gg_rct_Grave3 = nil
gg_rct_Cry4 = nil
gg_rct_BlueKeyDoor = nil
gg_rct_Trap2 = nil
gg_rct_Trap1 = nil
gg_rct_Trap3 = nil
gg_rct_Button_yard = nil
gg_rct_Rat_In = nil
gg_cam_Cinematic1 = nil
gg_cam_Camera_003 = nil
gg_cam_Cinematic2 = nil
gg_cam_Cinematic3 = nil
gg_cam_Cinematic4 = nil
gg_cam_Cinematic5 = nil
gg_snd_Intro1 = nil
gg_snd_Intro2 = nil
gg_snd_Intro3 = nil
gg_snd_Intro4 = nil
gg_snd_Blood_Omen__Legacy_of_Kain___Solemn_Dirge__Willendorf_u = ""
gg_snd_Intro5 = nil
gg_snd_Intro6 = nil
gg_snd_Intro7 = nil
gg_snd_Intro8 = nil
gg_snd_Tips1 = nil
gg_snd_tremblement = nil
gg_snd_Tips2 = nil
gg_snd_Blood_Omen__Legacy_of_Kain___Kain_s_Mausoleum = ""
gg_snd_Tavern1 = nil
gg_snd_Tavern2 = nil
gg_snd_Tavern3 = nil
gg_snd_Tavern4 = nil
gg_snd_Murder1 = nil
gg_snd_Murder2 = nil
gg_snd_Kain1 = nil
gg_snd_Kain2 = nil
gg_snd_Kain3 = nil
gg_snd_cat_y = nil
gg_snd_Kain4Mana = nil
gg_snd_Kain5Light = nil
gg_snd_102__Awakening = ""
gg_snd_Kain6Rain = nil
gg_snd_SoundsKainLaugh = nil
gg_snd_Enemy = nil
gg_snd_BattleNetDoorsStereo2 = nil
gg_snd_PeonPissed4 = nil
gg_snd_PeonPissed3 = nil
gg_snd_KainRessurect = nil
gg_snd_Cry = nil
gg_snd_KainRevenge = nil
gg_snd_NecromancerYesAttack3 = nil
gg_snd_KelThuzadDeath1 = nil
gg_snd_UndeadDissipate2 = nil
gg_snd_BattleNetDoorsStereo201 = nil
gg_trg_Tips_1 = nil
gg_trg_Tips_2 = nil
gg_trg_Tips_3 = nil
gg_trg_Intro_1 = nil
gg_trg_Intro_2 = nil
gg_trg_Intro_3 = nil
gg_trg_Intro_4 = nil
gg_trg_CinematicStart = nil
gg_trg_Closed1 = nil
gg_trg_RatKey = nil
gg_trg_RatKAggro = nil
gg_trg_Open_Pass_1 = nil
gg_trg_Key1 = nil
gg_trg_Key2 = nil
gg_trg_Key3 = nil
gg_trg_LightOn = nil
gg_trg_LightOff = nil
gg_trg_LightDamage = nil
gg_trg_Button_1 = nil
gg_trg_Button_2 = nil
gg_trg_Button_3 = nil
gg_trg_Grave1 = nil
gg_trg_Grave2 = nil
gg_trg_Grave3 = nil
gg_trg_RedKey = nil
gg_trg_RedKeyDoor = nil
gg_trg_BlueKey = nil
gg_trg_BlueKeyDoor = nil
gg_trg_Portal1_Inn = nil
gg_trg_Trap1 = nil
gg_trg_Trap1_Damage = nil
gg_trg_Trap2 = nil
gg_trg_Trap2_Damage = nil
gg_trg_Trap3 = nil
gg_trg_Trap3_Damage = nil
gg_trg_Button_Yard = nil
gg_trg_RemoveDark = nil
gg_trg_Button_1_Copy = nil
gg_trg_Rabbits = nil
gg_trg_RabbitsEnd = nil
gg_trg_KotoBog = nil
gg_trg_SelectHero = nil
gg_trg_Revive_victim = nil
gg_trg_Cry = nil
gg_trg_Kain_Laugh = nil
gg_trg_Enemy_Scream = nil
gg_trg_SkipIntro = nil
gg_trg_Fixed_Camera = nil
gg_trg_Kain_Dies = nil
gg_trg_Init = nil
gg_unit_hpea_0000 = nil
gg_unit_Hpal_0002 = nil
gg_unit_H000_0004 = nil
gg_unit_hfoo_0005 = nil
gg_unit_hfoo_0006 = nil
gg_unit_h001_0007 = nil
gg_item_manh_0008 = nil
gg_unit_n000_0032 = nil
gg_item_lmbr_0011 = nil
gg_unit_unec_0079 = nil
gg_item_I000_0009 = nil
gg_unit_u000_0162 = nil
gg_unit_n002_0069 = nil
gg_item_spsh_0071 = nil
gg_unit_opeo_0070 = nil
gg_unit_obot_0077 = nil
gg_unit_ninf_0197 = nil
gg_unit_u001_0047 = nil
gg_unit_hrif_0204 = nil
gg_unit_hrif_0225 = nil
gg_unit_hrif_0227 = nil
gg_dest_YTfb_1741 = nil
gg_dest_YTfb_1740 = nil
gg_dest_YTfb_1739 = nil
gg_dest_DTlv_4275 = nil
gg_dest_CTtc_0212 = nil
gg_dest_DTfx_0479 = nil
gg_dest_YTfb_0506 = nil
gg_dest_YTfb_0507 = nil
gg_dest_YTfb_0508 = nil
gg_dest_YTfb_0509 = nil
gg_dest_YY13_0211 = nil
gg_dest_YTfb_0595 = nil
gg_dest_YTfb_0596 = nil
gg_dest_YTfb_0597 = nil
gg_dest_YTfb_0598 = nil
gg_dest_DTlv_0696 = nil
gg_dest_YTfb_0972 = nil
gg_dest_YTfb_0973 = nil
gg_dest_YTfb_0974 = nil
gg_dest_YTfb_0975 = nil
gg_dest_YTfb_0976 = nil
gg_dest_YTfb_0977 = nil
gg_dest_YTfc_1351 = nil
gg_dest_YTfc_1352 = nil
gg_dest_YTfb_1353 = nil
gg_dest_YTfb_0703 = nil
gg_dest_YTfb_0704 = nil
gg_dest_YTfb_0705 = nil
gg_dest_B003_3904 = nil
gg_dest_B003_3905 = nil
gg_dest_B003_3906 = nil
gg_dest_DTfx_4421 = nil
gg_dest_YTfb_4504 = nil
gg_dest_YTfb_4505 = nil
gg_dest_YTfb_4506 = nil
gg_dest_B004_6078 = nil
gg_dest_B004_10353 = nil
gg_dest_YTfb_6073 = nil
gg_dest_YTfb_6074 = nil
gg_dest_YTfb_6075 = nil
gg_dest_YTfb_6076 = nil
gg_dest_YY16_3714 = nil
gg_dest_YTfb_8452 = nil
gg_dest_YTfb_8453 = nil
gg_dest_YTfb_8454 = nil
gg_dest_YTfb_8523 = nil
gg_dest_YTfb_10005 = nil
gg_dest_YTfb_10009 = nil
gg_dest_YTfb_10010 = nil
gg_dest_DTfx_10185 = nil
gg_dest_DTlv_6072 = nil
function InitGlobals()
    udg_IntLightCheck = 0
    udg_Cat = 0
    udg_Random = 0
    udg_IsRatBlocked = false
end

function InitSounds()
    gg_snd_Intro1 = CreateSound("war3mapImported\\Intro1.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_Intro1, 4593)
    SetSoundChannel(gg_snd_Intro1, 0)
    SetSoundVolume(gg_snd_Intro1, 127)
    SetSoundPitch(gg_snd_Intro1, 1.0)
    gg_snd_Intro2 = CreateSound("war3mapImported\\Intro2.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_Intro2, 9187)
    SetSoundChannel(gg_snd_Intro2, 0)
    SetSoundVolume(gg_snd_Intro2, 127)
    SetSoundPitch(gg_snd_Intro2, 1.0)
    gg_snd_Intro3 = CreateSound("war3mapImported\\Intro3.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_Intro3, 9187)
    SetSoundChannel(gg_snd_Intro3, 0)
    SetSoundVolume(gg_snd_Intro3, 127)
    SetSoundPitch(gg_snd_Intro3, 1.0)
    gg_snd_Intro4 = CreateSound("war3mapImported\\Intro4.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_Intro4, 9187)
    SetSoundChannel(gg_snd_Intro4, 0)
    SetSoundVolume(gg_snd_Intro4, 127)
    SetSoundPitch(gg_snd_Intro4, 1.0)
    gg_snd_Blood_Omen__Legacy_of_Kain___Solemn_Dirge__Willendorf_u = "war3mapImported\\Blood Omen_ Legacy of Kain - Solemn Dirge (Willendorf).mp3"
    gg_snd_Intro5 = CreateSound("war3mapImported\\Intro5.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_Intro5, 4593)
    SetSoundChannel(gg_snd_Intro5, 0)
    SetSoundVolume(gg_snd_Intro5, 127)
    SetSoundPitch(gg_snd_Intro5, 1.0)
    gg_snd_Intro6 = CreateSound("war3mapImported\\Intro6.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_Intro6, 4593)
    SetSoundChannel(gg_snd_Intro6, 0)
    SetSoundVolume(gg_snd_Intro6, 127)
    SetSoundPitch(gg_snd_Intro6, 1.0)
    gg_snd_Intro7 = CreateSound("war3mapImported\\Intro7.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_Intro7, 4593)
    SetSoundChannel(gg_snd_Intro7, 0)
    SetSoundVolume(gg_snd_Intro7, 127)
    SetSoundPitch(gg_snd_Intro7, 1.0)
    gg_snd_Intro8 = CreateSound("war3mapImported\\Intro8.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_Intro8, 6281)
    SetSoundChannel(gg_snd_Intro8, 0)
    SetSoundVolume(gg_snd_Intro8, 127)
    SetSoundPitch(gg_snd_Intro8, 1.0)
    gg_snd_Tips1 = CreateSound("war3mapImported\\Tips1.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_Tips1, 16776)
    SetSoundChannel(gg_snd_Tips1, 0)
    SetSoundVolume(gg_snd_Tips1, 127)
    SetSoundPitch(gg_snd_Tips1, 1.0)
    gg_snd_tremblement = CreateSound("war3mapImported\\tremblement.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_tremblement, 3832)
    SetSoundChannel(gg_snd_tremblement, 0)
    SetSoundVolume(gg_snd_tremblement, 127)
    SetSoundPitch(gg_snd_tremblement, 1.0)
    gg_snd_Tips2 = CreateSound("war3mapImported\\Tips2.wav", false, false, false, 10, 10, "DefaultEAXON")
    SetSoundDuration(gg_snd_Tips2, 6501)
    SetSoundChannel(gg_snd_Tips2, 0)
    SetSoundVolume(gg_snd_Tips2, 127)
    SetSoundPitch(gg_snd_Tips2, 1.0)
    gg_snd_Blood_Omen__Legacy_of_Kain___Kain_s_Mausoleum = "war3mapImported\\Blood Omen_ Legacy of Kain - Kain's Mausoleum.mp3"
    gg_snd_Tavern1 = CreateSound("war3mapImported/Tavern1.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Tavern1, 4728)
    SetSoundChannel(gg_snd_Tavern1, 0)
    SetSoundVolume(gg_snd_Tavern1, 127)
    SetSoundPitch(gg_snd_Tavern1, 1.0)
    gg_snd_Tavern2 = CreateSound("war3mapImported/Tavern2.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Tavern2, 8512)
    SetSoundChannel(gg_snd_Tavern2, 0)
    SetSoundVolume(gg_snd_Tavern2, 127)
    SetSoundPitch(gg_snd_Tavern2, 1.0)
    gg_snd_Tavern3 = CreateSound("war3mapImported/Tavern3.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Tavern3, 7665)
    SetSoundChannel(gg_snd_Tavern3, 0)
    SetSoundVolume(gg_snd_Tavern3, 127)
    SetSoundPitch(gg_snd_Tavern3, 1.0)
    gg_snd_Tavern4 = CreateSound("war3mapImported/Tavern4.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Tavern4, 8810)
    SetSoundChannel(gg_snd_Tavern4, 0)
    SetSoundVolume(gg_snd_Tavern4, 127)
    SetSoundPitch(gg_snd_Tavern4, 1.0)
    gg_snd_Murder1 = CreateSound("war3mapImported/Murder1.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Murder1, 1144)
    SetSoundChannel(gg_snd_Murder1, 0)
    SetSoundVolume(gg_snd_Murder1, 127)
    SetSoundPitch(gg_snd_Murder1, 1.0)
    gg_snd_Murder2 = CreateSound("war3mapImported/Murder2.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Murder2, 2215)
    SetSoundChannel(gg_snd_Murder2, 0)
    SetSoundVolume(gg_snd_Murder2, 127)
    SetSoundPitch(gg_snd_Murder2, 1.0)
    gg_snd_Kain1 = CreateSound("war3mapImported/Kain1.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Kain1, 6744)
    SetSoundChannel(gg_snd_Kain1, 0)
    SetSoundVolume(gg_snd_Kain1, 127)
    SetSoundPitch(gg_snd_Kain1, 1.0)
    gg_snd_Kain2 = CreateSound("war3mapImported/Kain2.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Kain2, 16451)
    SetSoundChannel(gg_snd_Kain2, 0)
    SetSoundVolume(gg_snd_Kain2, 127)
    SetSoundPitch(gg_snd_Kain2, 1.0)
    gg_snd_Kain3 = CreateSound("war3mapImported/Kain3.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Kain3, 6583)
    SetSoundChannel(gg_snd_Kain3, 0)
    SetSoundVolume(gg_snd_Kain3, 127)
    SetSoundPitch(gg_snd_Kain3, 1.0)
    gg_snd_cat_y = CreateSound("war3mapImported/cat_y.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_cat_y, 4445)
    SetSoundChannel(gg_snd_cat_y, 0)
    SetSoundVolume(gg_snd_cat_y, 127)
    SetSoundPitch(gg_snd_cat_y, 1.0)
    gg_snd_Kain4Mana = CreateSound("war3mapImported/Kain4Mana.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Kain4Mana, 9142)
    SetSoundChannel(gg_snd_Kain4Mana, 0)
    SetSoundVolume(gg_snd_Kain4Mana, 127)
    SetSoundPitch(gg_snd_Kain4Mana, 1.0)
    gg_snd_Kain5Light = CreateSound("war3mapImported/Kain5Light.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Kain5Light, 14961)
    SetSoundChannel(gg_snd_Kain5Light, 0)
    SetSoundVolume(gg_snd_Kain5Light, 127)
    SetSoundPitch(gg_snd_Kain5Light, 1.0)
    gg_snd_102__Awakening = "war3mapImported/102. Awakening.mp3"
    gg_snd_Kain6Rain = CreateSound("war3mapImported/Kain6Rain.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Kain6Rain, 6446)
    SetSoundChannel(gg_snd_Kain6Rain, 0)
    SetSoundVolume(gg_snd_Kain6Rain, 127)
    SetSoundPitch(gg_snd_Kain6Rain, 1.0)
    gg_snd_SoundsKainLaugh = CreateSound("war3mapImported/SoundsKainLaugh.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_SoundsKainLaugh, 3182)
    SetSoundChannel(gg_snd_SoundsKainLaugh, 0)
    SetSoundVolume(gg_snd_SoundsKainLaugh, 127)
    SetSoundPitch(gg_snd_SoundsKainLaugh, 1.0)
    gg_snd_Enemy = CreateSound("war3mapImported/Enemy.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Enemy, 2082)
    SetSoundChannel(gg_snd_Enemy, 0)
    SetSoundVolume(gg_snd_Enemy, 127)
    SetSoundPitch(gg_snd_Enemy, 1.0)
    gg_snd_BattleNetDoorsStereo2 = CreateSound("Sound/Interface/BattleNetDoorsStereo2.flac", false, false, false, 0, 0, "SpellsEAX")
    SetSoundParamsFromLabel(gg_snd_BattleNetDoorsStereo2, "GlueScreenBNetSlam")
    SetSoundDuration(gg_snd_BattleNetDoorsStereo2, 2645)
    SetSoundVolume(gg_snd_BattleNetDoorsStereo2, 127)
    gg_snd_PeonPissed4 = CreateSound("Units/Orc/Peon/PeonPissed4.flac", false, true, true, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_PeonPissed4, "PeonPissed")
    SetSoundDuration(gg_snd_PeonPissed4, 2352)
    SetSoundVolume(gg_snd_PeonPissed4, 127)
    gg_snd_PeonPissed3 = CreateSound("Units/Orc/Peon/PeonPissed3.flac", false, true, true, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_PeonPissed3, "PeonPissed")
    SetSoundDuration(gg_snd_PeonPissed3, 1551)
    SetSoundVolume(gg_snd_PeonPissed3, 127)
    gg_snd_KainRessurect = CreateSound("war3mapImported/KainRessurect.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_KainRessurect, 6684)
    SetSoundChannel(gg_snd_KainRessurect, 0)
    SetSoundVolume(gg_snd_KainRessurect, 127)
    SetSoundPitch(gg_snd_KainRessurect, 1.0)
    gg_snd_Cry = CreateSound("war3mapImported/Cry.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_Cry, 2805)
    SetSoundChannel(gg_snd_Cry, 0)
    SetSoundVolume(gg_snd_Cry, 127)
    SetSoundPitch(gg_snd_Cry, 1.0)
    gg_snd_KainRevenge = CreateSound("war3mapImported/KainRevenge.wav", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundDuration(gg_snd_KainRevenge, 8068)
    SetSoundChannel(gg_snd_KainRevenge, 0)
    SetSoundVolume(gg_snd_KainRevenge, 127)
    SetSoundPitch(gg_snd_KainRevenge, 1.0)
    gg_snd_NecromancerYesAttack3 = CreateSound("Units/Undead/Necromancer/NecromancerYesAttack3.flac", false, true, true, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_NecromancerYesAttack3, "NecromancerYesAttack")
    SetSoundDuration(gg_snd_NecromancerYesAttack3, 2216)
    SetSoundVolume(gg_snd_NecromancerYesAttack3, 127)
    gg_snd_KelThuzadDeath1 = CreateSound("Sound/Dialogue/Extra/KelThuzadDeath1.flac", false, false, false, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_KelThuzadDeath1, "KelThuzadDeath1")
    SetSoundDuration(gg_snd_KelThuzadDeath1, 2977)
    SetSoundVolume(gg_snd_KelThuzadDeath1, 120)
    gg_snd_UndeadDissipate2 = CreateSound("Sound/Units/Undead/Dissipate/UndeadDissipate2.flac", false, true, true, 0, 0, "DefaultEAXON")
    SetSoundParamsFromLabel(gg_snd_UndeadDissipate2, "UndeadDissipate")
    SetSoundDuration(gg_snd_UndeadDissipate2, 3612)
    SetSoundVolume(gg_snd_UndeadDissipate2, 127)
    gg_snd_BattleNetDoorsStereo201 = CreateSound("Sound/Interface/BattleNetDoorsStereo2.flac", false, false, false, 0, 0, "SpellsEAX")
    SetSoundParamsFromLabel(gg_snd_BattleNetDoorsStereo201, "GlueScreenBNetSlam")
    SetSoundDuration(gg_snd_BattleNetDoorsStereo201, 2645)
    SetSoundVolume(gg_snd_BattleNetDoorsStereo201, 127)
end

function CreateAllDestructables()
    local d
    local t
    local life
    gg_dest_B003_3904 = BlzCreateDestructableZWithSkin(FourCC("B003"), 590.5, 8531.5, 656.9, 224.099, 0.500, 0, FourCC("B003"))
    gg_dest_B003_3905 = BlzCreateDestructableZWithSkin(FourCC("B003"), 778.2, 8281.3, 663.3, 181.177, 0.500, 0, FourCC("B003"))
    gg_dest_B003_3906 = BlzCreateDestructableZWithSkin(FourCC("B003"), 785.6, 8038.8, 663.3, 180.287, 0.500, 0, FourCC("B003"))
    gg_dest_B004_6078 = BlzCreateDestructableZWithSkin(FourCC("B004"), 2510.8, 1817.2, 928.0, 268.725, 5.000, 0, FourCC("B004"))
    gg_dest_B004_10353 = BlzCreateDestructableZWithSkin(FourCC("B004"), 8954.7, -1465.2, 552.2, 270.000, 3.500, 0, FourCC("B004"))
    gg_dest_CTtc_0212 = BlzCreateDestructableWithSkin(FourCC("CTtc"), 416.0, -2464.0, 270.000, 1.687, 2, FourCC("CTtc"))
    gg_dest_DTfx_0479 = BlzCreateDestructableZWithSkin(FourCC("DTfx"), 448.0, 6528.0, 567.3, 270.000, 1.000, 0, FourCC("DTfx"))
    gg_dest_DTfx_4421 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 3392.0, 3520.0, 270.000, 1.000, 0, FourCC("DTfx"))
    gg_dest_DTfx_10185 = BlzCreateDestructableWithSkin(FourCC("DTfx"), 8576.0, -1152.0, 270.000, 1.000, 0, FourCC("DTfx"))
    gg_dest_DTlv_6072 = BlzCreateDestructableWithSkin(FourCC("DTlv"), 4448.0, 2656.0, 269.772, 1.500, 0, FourCC("DTlv"))
    gg_dest_DTlv_4275 = BlzCreateDestructableWithSkin(FourCC("DTlv"), 2976.0, 6304.0, 0.613, 1.500, 0, FourCC("DTlv"))
    gg_dest_DTlv_0696 = BlzCreateDestructableWithSkin(FourCC("DTlv"), -2336.0, 2976.0, 43.000, 1.500, 0, FourCC("DTlv"))
    gg_dest_YTfb_0596 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), 736.0, 6368.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0597 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), 736.0, 6432.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0598 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), 736.0, 6496.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0595 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), 736.0, 6304.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0972 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), -1376.0, 7776.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0973 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), -1376.0, 7840.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0509 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), -1760.0, 6432.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0975 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), -1376.0, 8096.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0976 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), -1376.0, 7904.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0977 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), -1376.0, 8032.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_10010 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 6624.0, -3296.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_10009 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 6624.0, -3360.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_1353 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), 2016.0, 7200.0, 509.6, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0703 = BlzCreateDestructableWithSkin(FourCC("YTfb"), -928.0, -672.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0704 = BlzCreateDestructableWithSkin(FourCC("YTfb"), -864.0, -672.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0705 = BlzCreateDestructableWithSkin(FourCC("YTfb"), -992.0, -672.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0508 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), -1760.0, 6496.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0507 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), -1760.0, 6560.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0506 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), -1760.0, 6624.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_1739 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), 1824.0, 6432.0, 509.6, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_4504 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 2784.0, 4384.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_4505 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 2848.0, 4384.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_4506 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 2912.0, 4384.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_1740 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), 1824.0, 6368.0, 509.6, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_0974 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), -1376.0, 7968.0, 765.7, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_6073 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 2528.0, 1824.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_6074 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 2528.0, 1888.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_6075 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 2528.0, 1952.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_6076 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 2528.0, 2016.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_10005 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 6624.0, -3424.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_8452 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 5344.0, 1312.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_8453 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 5344.0, 1248.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_8454 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 5344.0, 1184.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_8523 = BlzCreateDestructableWithSkin(FourCC("YTfb"), 5344.0, 1120.0, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfb_1741 = BlzCreateDestructableZWithSkin(FourCC("YTfb"), 1824.0, 6304.0, 509.6, 270.000, 1.000, 0, FourCC("YTfb"))
    gg_dest_YTfc_1351 = BlzCreateDestructableZWithSkin(FourCC("YTfc"), 2048.0, 7424.0, 765.7, 270.000, 1.000, 0, FourCC("YTfc"))
    gg_dest_YTfc_1352 = BlzCreateDestructableZWithSkin(FourCC("YTfc"), 2048.0, 7296.0, 765.7, 270.000, 1.000, 0, FourCC("YTfc"))
    gg_dest_YY13_0211 = BlzCreateDestructableZWithSkin(FourCC("YY13"), -1696.0, -2656.0, 187.8, 0.000, 1.000, 0, FourCC("YY13"))
    gg_dest_YY16_3714 = BlzCreateDestructableZWithSkin(FourCC("YY16"), 9568.0, 1152.0, 178.6, 0.000, 1.000, 0, FourCC("YY16"))
end

function CreateAllItems()
    local itemID
    gg_item_I000_0009 = BlzCreateItemWithSkin(FourCC("I000"), 2852.0, 6423.3, FourCC("I000"))
    BlzCreateItemWithSkin(FourCC("lmbr"), 8232.1, 9096.0, FourCC("lmbr"))
    gg_item_lmbr_0011 = BlzCreateItemWithSkin(FourCC("lmbr"), -910.1, 4967.8, FourCC("lmbr"))
    BlzCreateItemWithSkin(FourCC("lmbr"), 1303.9, 6345.6, FourCC("lmbr"))
    BlzCreateItemWithSkin(FourCC("lmbr"), 8387.3, 2473.2, FourCC("lmbr"))
    BlzCreateItemWithSkin(FourCC("lmbr"), 820.0, 3122.4, FourCC("lmbr"))
    gg_item_manh_0008 = BlzCreateItemWithSkin(FourCC("manh"), -767.0, 8480.5, FourCC("manh"))
    BlzCreateItemWithSkin(FourCC("ratf"), 476.4, 5067.2, FourCC("ratf"))
    gg_item_spsh_0071 = BlzCreateItemWithSkin(FourCC("spsh"), 3070.0, 1774.1, FourCC("spsh"))
end

function CreateBuildingsForPlayer0()
    local p = Player(0)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -2089.7, 2514.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -2242.5, 2490.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -2422.2, 2490.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -2597.5, 2530.9, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -2754.9, 2621.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -2055.5, 2554.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -1889.4, 2528.2, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 6136.0, 3685.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 6351.4, 3678.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 6525.9, 3714.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 6767.2, 3690.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 5953.2, 3595.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 5853.0, 3425.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 5679.6, 3345.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 5564.2, 3154.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 5508.0, 3013.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 6021.0, 3143.2, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 4561.3, 2649.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -22.6, -2187.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -157.7, -2061.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -138.4, -1854.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 834.0, -1151.7, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 680.2, -1426.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 970.7, -1063.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 671.9, -1330.2, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -1396.9, -2677.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -1279.6, -2849.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -1183.4, -3069.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -1093.1, -3093.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -898.2, -2957.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -1046.2, -2890.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -775.7, -3066.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -631.9, -3160.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -806.6, -3273.2, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -484.2, -2871.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -1631.4, 3184.2, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7250.7, 4459.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7362.3, 4336.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7392.8, 3265.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7466.1, 3338.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7274.3, 3138.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7475.0, 3539.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7471.8, 3681.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7508.9, 3855.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8050.2, 3044.7, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8269.9, 3550.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7982.7, 3249.7, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8460.5, 3493.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8633.7, 3469.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8218.3, 2999.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8019.2, 3455.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8087.1, 3593.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8276.0, 2808.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -1931.7, 2637.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -2328.1, 3029.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -2499.3, 3110.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3366.6, 3786.2, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3402.9, 3672.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3377.7, 3483.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7846.3, 2381.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8034.7, 2304.7, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7897.6, 2437.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8197.2, 2269.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8301.0, 2125.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8442.5, 2168.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8589.1, 2117.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8652.4, 2163.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8815.3, 2042.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8964.5, 2027.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8905.1, 1942.7, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8756.8, 2263.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8903.4, 2405.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 9044.7, 2583.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10103.5, 2403.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10080.7, 2288.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10241.5, 2556.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10280.2, 2693.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10306.0, 2788.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10215.1, 3106.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10277.7, 2919.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3298.7, 3274.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3817.8, 5017.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3419.7, 7476.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3421.9, 7314.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3534.9, 7171.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3340.7, 7767.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3179.6, 7831.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -3039.7, 7942.2, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -1493.9, 3461.7, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -1173.2, 3589.7, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7073.9, 3144.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 6925.3, 3236.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7687.0, 4037.7, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7538.4, 4146.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7806.7, 4204.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7890.0, 4476.0, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 7829.5, 4323.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8397.3, 3947.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8276.8, 3746.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8162.1, 3730.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8531.4, 4103.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 8296.5, 3893.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 6835.6, 3363.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 6750.0, 3519.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 9134.8, 2696.1, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 9224.8, 2836.9, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 9220.7, 3116.5, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 9157.9, 2932.8, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 9149.9, 1612.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 9948.7, 1607.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10104.9, 1625.3, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10311.4, 1615.6, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10473.6, 1657.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10573.0, 1859.7, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10672.0, 1976.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 10878.2, 2119.2, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 11005.9, 2170.9, 270.000, FourCC("h004"))
end

function CreateUnitsForPlayer0()
    local p = Player(0)
    local u
    local unitID
    local t
    local life
    gg_unit_H000_0004 = BlzCreateUnitWithSkin(p, FourCC("H000"), -765.9, -112.0, 87.120, FourCC("H000"))
    SetHeroStr(gg_unit_H000_0004, 2, true)
    SetHeroAgi(gg_unit_H000_0004, 3, true)
    SetHeroInt(gg_unit_H000_0004, 1, true)
    SetUnitState(gg_unit_H000_0004, UNIT_STATE_MANA, 15)
    SetUnitColor(gg_unit_H000_0004, ConvertPlayerColor(20))
    u = BlzCreateUnitWithSkin(p, FourCC("hrif"), 6845.9, 2026.3, 45.000, FourCC("hrif"))
    gg_unit_hrif_0204 = BlzCreateUnitWithSkin(p, FourCC("hrif"), 6439.9, 1595.8, 0.000, FourCC("hrif"))
    gg_unit_hrif_0225 = BlzCreateUnitWithSkin(p, FourCC("hrif"), 7315.5, 1605.2, 45.000, FourCC("hrif"))
    gg_unit_hrif_0227 = BlzCreateUnitWithSkin(p, FourCC("hrif"), 6850.9, 878.3, 135.000, FourCC("hrif"))
end

function CreateBuildingsForPlayer5()
    local p = Player(5)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), 9064.3, 1805.5, 270.000, FourCC("h004"))
end

function CreateUnitsForPlayer11()
    local p = Player(11)
    local u
    local unitID
    local t
    local life
    gg_unit_hfoo_0005 = BlzCreateUnitWithSkin(p, FourCC("hfoo"), -316.9, -1844.1, 76.004, FourCC("hfoo"))
    gg_unit_hfoo_0006 = BlzCreateUnitWithSkin(p, FourCC("hfoo"), -624.5, -1799.4, 49.675, FourCC("hfoo"))
    gg_unit_h001_0007 = BlzCreateUnitWithSkin(p, FourCC("h001"), -491.1, -1877.6, 62.188, FourCC("h001"))
    u = BlzCreateUnitWithSkin(p, FourCC("hfoo"), 961.5, -2648.2, 267.323, FourCC("hfoo"))
end

function CreateUnitsForPlayer20()
    local p = Player(20)
    local u
    local unitID
    local t
    local life
    gg_unit_n000_0032 = BlzCreateUnitWithSkin(p, FourCC("n000"), 634.6, -612.6, 312.290, FourCC("n000"))
end

function CreateNeutralHostile()
    local p = Player(PLAYER_NEUTRAL_AGGRESSIVE)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("h002"), -2617.8, 5957.7, 168.930, FourCC("h002"))
    u = BlzCreateUnitWithSkin(p, FourCC("u005"), 9605.6, 4394.7, 277.530, FourCC("u005"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), -195.0, 6447.1, 265.100, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), -800.9, 8271.7, 122.620, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 1101.0, 7081.4, 186.046, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), -962.2, 7847.8, 153.299, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), -268.4, 8280.2, 208.056, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("h002"), -2818.5, 6112.2, 333.751, FourCC("h002"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 1204.5, 7099.0, 165.284, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("u003"), 2767.2, 7275.3, 184.844, FourCC("u003"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 429.3, 7293.0, 96.099, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("h002"), -2021.4, 8208.7, 32.304, FourCC("h002"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 3734.3, 8095.6, 266.063, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 4053.4, 8080.8, 269.597, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("h002"), -2345.9, 2731.2, 340.995, FourCC("h002"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 340.0, 7216.2, 45.067, FourCC("uske"))
    gg_unit_u001_0047 = BlzCreateUnitWithSkin(p, FourCC("u001"), 7343.6, 67.9, 183.501, FourCC("u001"))
    SetUnitColor(gg_unit_u001_0047, ConvertPlayerColor(1))
    u = BlzCreateUnitWithSkin(p, FourCC("hfoo"), 3881.9, 3369.7, 1.268, FourCC("hfoo"))
    u = BlzCreateUnitWithSkin(p, FourCC("hfoo"), 3075.3, 4210.6, 138.154, FourCC("hfoo"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 2996.9, 4748.4, 269.694, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 2676.2, 4757.5, 81.913, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("hfoo"), 2060.7, 6230.8, 271.681, FourCC("hfoo"))
    gg_unit_u000_0162 = BlzCreateUnitWithSkin(p, FourCC("u000"), 2050.0, 6576.1, 115.958, FourCC("u000"))
    SetUnitColor(gg_unit_u000_0162, ConvertPlayerColor(0))
    u = BlzCreateUnitWithSkin(p, FourCC("u002"), 11477.5, -229.0, 175.390, FourCC("u002"))
    SetUnitColor(u, ConvertPlayerColor(6))
    u = BlzCreateUnitWithSkin(p, FourCC("h002"), -1429.1, 3954.2, 87.168, FourCC("h002"))
    u = BlzCreateUnitWithSkin(p, FourCC("h002"), -3186.1, 4919.6, 347.990, FourCC("h002"))
    u = BlzCreateUnitWithSkin(p, FourCC("h002"), -3299.2, 4126.0, 151.343, FourCC("h002"))
    u = BlzCreateUnitWithSkin(p, FourCC("u004"), 3902.1, 8189.2, 272.549, FourCC("u004"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 2869.0, 7363.9, 96.099, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 2874.6, 7168.2, 173.486, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("u003"), 4232.9, 6270.9, 92.610, FourCC("u003"))
    u = BlzCreateUnitWithSkin(p, FourCC("u003"), 3993.3, 6243.0, 85.143, FourCC("u003"))
    u = BlzCreateUnitWithSkin(p, FourCC("hfoo"), 2823.6, 6576.3, 215.770, FourCC("hfoo"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 5709.4, 3934.4, 7.630, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 5698.6, 4307.4, 348.710, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("hfoo"), 7118.5, 3982.5, 301.502, FourCC("hfoo"))
    u = BlzCreateUnitWithSkin(p, FourCC("hfoo"), 6621.6, 5312.8, 207.924, FourCC("hfoo"))
    u = BlzCreateUnitWithSkin(p, FourCC("hfoo"), 6145.6, 5046.8, 71.700, FourCC("hfoo"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 5323.0, 5774.9, 219.886, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), 4754.4, 5563.7, 46.073, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("u007"), -6710.4, 14658.7, 257.210, FourCC("u007"))
    u = BlzCreateUnitWithSkin(p, FourCC("u007"), 3276.8, -1775.2, 350.544, FourCC("u007"))
    u = BlzCreateUnitWithSkin(p, FourCC("u007"), 3328.1, -2836.1, 355.691, FourCC("u007"))
    u = BlzCreateUnitWithSkin(p, FourCC("u007"), 6861.5, -2269.1, 176.844, FourCC("u007"))
    u = BlzCreateUnitWithSkin(p, FourCC("u003"), 6834.3, -2104.1, 148.910, FourCC("u003"))
    u = BlzCreateUnitWithSkin(p, FourCC("u003"), 6682.3, -2308.4, 148.910, FourCC("u003"))
    u = BlzCreateUnitWithSkin(p, FourCC("u004"), 7491.4, 204.3, 83.826, FourCC("u004"))
    u = BlzCreateUnitWithSkin(p, FourCC("u004"), 7463.4, -133.8, 316.269, FourCC("u004"))
    u = BlzCreateUnitWithSkin(p, FourCC("u004"), 6897.5, -216.6, 154.525, FourCC("u004"))
end

function CreateNeutralPassiveBuildings()
    local p = Player(PLAYER_NEUTRAL_PASSIVE)
    local u
    local unitID
    local t
    local life
    u = BlzCreateUnitWithSkin(p, FourCC("h004"), -6088.7, 4644.4, 270.000, FourCC("h004"))
    u = BlzCreateUnitWithSkin(p, FourCC("h005"), -6244.4, 4927.5, 270.000, FourCC("h005"))
    u = BlzCreateUnitWithSkin(p, FourCC("h005"), -6108.4, 5260.7, 270.000, FourCC("h005"))
    u = BlzCreateUnitWithSkin(p, FourCC("h005"), -5997.0, 5236.3, 270.000, FourCC("h005"))
    u = BlzCreateUnitWithSkin(p, FourCC("h005"), 7016.2, 4656.0, 270.000, FourCC("h005"))
    u = BlzCreateUnitWithSkin(p, FourCC("h005"), 7144.2, 4592.0, 270.000, FourCC("h005"))
end

function CreateNeutralPassive()
    local p = Player(PLAYER_NEUTRAL_PASSIVE)
    local u
    local unitID
    local t
    local life
    gg_unit_hpea_0000 = BlzCreateUnitWithSkin(p, FourCC("hpea"), -898.6, 313.0, 357.833, FourCC("hpea"))
    gg_unit_Hpal_0002 = BlzCreateUnitWithSkin(p, FourCC("Hpal"), -3759.5, -1923.8, 289.210, FourCC("Hpal"))
    SetHeroLevel(gg_unit_Hpal_0002, 4, false)
    SetHeroStr(gg_unit_Hpal_0002, 7, true)
    SetHeroAgi(gg_unit_Hpal_0002, 10, true)
    SetHeroInt(gg_unit_Hpal_0002, 4, true)
    life = GetUnitState(gg_unit_Hpal_0002, UNIT_STATE_LIFE)
    SetUnitState(gg_unit_Hpal_0002, UNIT_STATE_LIFE, 0.15 * life)
    SetUnitState(gg_unit_Hpal_0002, UNIT_STATE_MANA, 85)
    SetUnitColor(gg_unit_Hpal_0002, ConvertPlayerColor(20))
    SelectHeroSkill(gg_unit_Hpal_0002, FourCC("A002"))
    IssueImmediateOrder(gg_unit_Hpal_0002, "")
    SelectHeroSkill(gg_unit_Hpal_0002, FourCC("dssd"))
    IssueImmediateOrder(gg_unit_Hpal_0002, "")
    SelectHeroSkill(gg_unit_Hpal_0002, FourCC("A005"))
    IssueImmediateOrder(gg_unit_Hpal_0002, "")
    SelectHeroSkill(gg_unit_Hpal_0002, FourCC("A007"))
    IssueImmediateOrder(gg_unit_Hpal_0002, "")
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), -748.1, 5369.9, 270.560, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("Hamg"), -2791.9, 505.5, 80.377, FourCC("Hamg"))
    u = BlzCreateUnitWithSkin(p, FourCC("necr"), -1095.7, 2958.7, 257.560, FourCC("necr"))
    u = BlzCreateUnitWithSkin(p, FourCC("necr"), -1457.7, 3226.6, 174.523, FourCC("necr"))
    u = BlzCreateUnitWithSkin(p, FourCC("necr"), -1008.2, 3079.1, 151.407, FourCC("necr"))
    u = BlzCreateUnitWithSkin(p, FourCC("necr"), -1353.7, 3342.0, 292.795, FourCC("necr"))
    u = BlzCreateUnitWithSkin(p, FourCC("necr"), -1315.6, 3069.0, 23.995, FourCC("necr"))
    u = BlzCreateUnitWithSkin(p, FourCC("necr"), -1168.2, 3051.9, 296.651, FourCC("necr"))
    u = BlzCreateUnitWithSkin(p, FourCC("necr"), -1325.2, 3177.5, 58.515, FourCC("necr"))
    u = BlzCreateUnitWithSkin(p, FourCC("necr"), -1246.7, 3377.2, 18.183, FourCC("necr"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), -1172.2, 6834.4, 270.560, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), -1067.3, 8563.4, 264.470, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), -1202.8, 8447.6, 308.100, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), -943.4, 6828.1, 270.560, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), 2293.1, 7542.8, 264.470, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), 2461.4, 7543.6, 264.470, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 1619.2, 6444.4, 272.667, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 1119.3, 6315.9, 301.979, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 1251.2, 6499.6, 242.772, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 2433.4, 6690.5, 323.129, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 2070.1, 6135.8, 238.927, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 2678.7, 5808.7, 74.446, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 2992.6, 7414.3, 226.501, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 2442.7, 7216.6, 289.257, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 1107.2, 7183.9, 71.095, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 462.4, 7294.8, 79.818, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 536.3, 8242.5, 12.646, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 152.9, 8166.4, 201.254, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), -878.9, 7953.1, 358.594, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), -1120.6, 8179.0, 52.461, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), -1469.4, 6679.9, 108.350, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), -903.5, 6428.8, 187.542, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 119.3, 6515.1, 22.918, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), -774.0, 5086.2, 2.604, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 178.2, 5032.3, 193.168, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 2877.9, 4706.3, 53.791, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), 4070.4, 3372.8, 176.771, FourCC("nvlw"))
    gg_unit_n002_0069 = BlzCreateUnitWithSkin(p, FourCC("n002"), 3296.7, 3774.7, 2.348, FourCC("n002"))
    gg_unit_opeo_0070 = BlzCreateUnitWithSkin(p, FourCC("opeo"), 962.5, 2153.7, 87.876, FourCC("opeo"))
    gg_unit_obot_0077 = BlzCreateUnitWithSkin(p, FourCC("obot"), 1032.5, 2381.5, 27.094, FourCC("obot"))
    gg_unit_unec_0079 = BlzCreateUnitWithSkin(p, FourCC("unec"), -5345.8, -3399.1, 109.833, FourCC("unec"))
    u = BlzCreateUnitWithSkin(p, FourCC("hwt3"), 6842.5, 1126.6, 266.430, FourCC("hwt3"))
    gg_unit_ninf_0197 = BlzCreateUnitWithSkin(p, FourCC("ninf"), 8441.1, 2494.1, 52.657, FourCC("ninf"))
    u = BlzCreateUnitWithSkin(p, FourCC("h002"), -6878.2, 15042.4, 280.168, FourCC("h002"))
    u = BlzCreateUnitWithSkin(p, FourCC("hfoo"), -6586.0, 15022.1, 270.162, FourCC("hfoo"))
    u = BlzCreateUnitWithSkin(p, FourCC("uske"), -6773.1, 15028.1, 269.288, FourCC("uske"))
    u = BlzCreateUnitWithSkin(p, FourCC("u003"), -6685.6, 15032.2, 269.540, FourCC("u003"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), 3856.7, 5865.8, 355.320, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), 4887.1, 3895.0, 270.816, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("Edem"), -6494.4, 5040.3, 70.479, FourCC("Edmm"))
    u = BlzCreateUnitWithSkin(p, FourCC("u007"), -6489.3, 15018.4, 257.210, FourCC("u007"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), 2846.3, -74.7, 270.816, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nvlw"), 4438.5, -1035.3, 270.816, FourCC("nvlw"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 8937.7, -2489.0, 53.791, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 8950.4, -2584.7, 5.296, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 9046.0, -2530.7, 117.832, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 9111.3, -2605.1, 350.694, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 9083.5, -2692.5, 13.953, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 9022.5, -2715.6, 278.490, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 8965.5, -2642.4, 101.901, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 8925.9, -2563.9, 88.531, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 8955.1, -2493.7, 54.725, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 9029.5, -2470.0, 46.583, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 9095.7, -2510.8, 247.639, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 9063.7, -2612.4, 69.425, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 8999.8, -2666.3, 169.920, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 8986.3, -2648.1, 71.501, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 8989.2, -2600.8, 4.241, FourCC("nrat"))
    u = BlzCreateUnitWithSkin(p, FourCC("nrat"), 9015.1, -2575.8, 78.862, FourCC("nrat"))
end

function CreatePlayerBuildings()
    CreateBuildingsForPlayer0()
    CreateBuildingsForPlayer5()
end

function CreatePlayerUnits()
    CreateUnitsForPlayer0()
    CreateUnitsForPlayer11()
    CreateUnitsForPlayer20()
end

function CreateAllUnits()
    CreateNeutralPassiveBuildings()
    CreatePlayerBuildings()
    CreateNeutralHostile()
    CreateNeutralPassive()
    CreatePlayerUnits()
end

function CreateRegions()
    local we
    gg_rct_Intro_Trap = Rect(-928.0, -1728.0, 192.0, -1440.0)
    gg_rct_Bandits1 = Rect(544.0, -992.0, 736.0, -704.0)
    gg_rct_Bandits2 = Rect(-1088.0, -704.0, -736.0, 96.0)
    gg_rct_Bandits_Barkeep = Rect(-992.0, -256.0, -896.0, -128.0)
    gg_rct_Button_1 = Rect(352.0, 6432.0, 544.0, 6624.0)
    gg_rct_WallHide = Rect(-1888.0, 6400.0, -1760.0, 6656.0)
    gg_rct_Button_2 = Rect(-2464.0, 2848.0, -2208.0, 3072.0)
    gg_rct_Solve3 = Rect(1952.0, 7104.0, 2080.0, 7488.0)
    gg_rct_Camera_fix = Rect(3744.0, 2816.0, 6368.0, 6880.0)
    gg_rct_Region_011 = Rect(-1760.0, 6272.0, -1632.0, 6880.0)
    gg_rct_KainStart = Rect(-256.0, 4512.0, -160.0, 4608.0)
    gg_rct_KotoBogSpawn2 = Rect(-1120.0, 3200.0, -1056.0, 3264.0)
    gg_rct_Region_014 = Rect(-1664.0, 7744.0, -1344.0, 8224.0)
    gg_rct_EnterDark_2 = Rect(-1312.0, 7744.0, -1184.0, 8384.0)
    gg_rct_Region_016 = Rect(-1632.0, 2880.0, -992.0, 3424.0)
    gg_rct_KotoBogPortal = Rect(-1536.0, 3264.0, -1408.0, 3424.0)
    gg_rct_Region_018 = Rect(-3840.0, 3072.0, -3744.0, 3168.0)
    gg_rct_Graveyard = Rect(-4000.0, 2496.0, -1344.0, 8384.0)
    gg_rct_Tumbler1 = Rect(448.0, 8416.0, 640.0, 8608.0)
    gg_rct_Tumbler2 = Rect(608.0, 8192.0, 800.0, 8384.0)
    gg_rct_Tumbler3 = Rect(640.0, 7936.0, 832.0, 8128.0)
    gg_rct_LibraryPass = Rect(1728.0, 6144.0, 1920.0, 6656.0)
    gg_rct_LibraryPass_2 = Rect(704.0, 6048.0, 896.0, 6720.0)
    gg_rct_ButtonToLibrary = Rect(3264.0, 3424.0, 3520.0, 3616.0)
    gg_rct_Rat_Leave_Zone = Rect(3712.0, 3936.0, 4064.0, 4416.0)
    gg_rct_Rat_Start_Zone = Rect(3232.0, 3712.0, 3328.0, 3840.0)
    gg_rct_Region_028 = Rect(2656.0, 4352.0, 2976.0, 4480.0)
    gg_rct_Rat_Barrel_Zone = Rect(3264.0, 3584.0, 3456.0, 3712.0)
    gg_rct_Bergi_Run_Away = Rect(672.0, 1792.0, 1216.0, 2208.0)
    gg_rct_BergiFinish = Rect(1152.0, 4576.0, 1344.0, 4736.0)
    gg_rct_Cinematic_1 = Rect(-5632.0, -2912.0, -5536.0, -2816.0)
    gg_rct_Cinematic2 = Rect(-4960.0, -1952.0, -4832.0, -1888.0)
    gg_rct_Cry1 = Rect(-1088.0, 4896.0, -384.0, 5440.0)
    gg_rct_Cry2 = Rect(-1408.0, 6368.0, -704.0, 6912.0)
    gg_rct_DoorwayOpen = Rect(3648.0, 3520.0, 4000.0, 3648.0)
    gg_rct_DoorwayOpen2 = Rect(4928.0, 3136.0, 5280.0, 3264.0)
    gg_rct_DoorwayOpen3 = Rect(4928.0, 2528.0, 5312.0, 2656.0)
    gg_rct_LibraryOpen = Rect(2560.0, 2016.0, 2848.0, 2144.0)
    gg_rct_LibraryClosed = Rect(2432.0, 1728.0, 2560.0, 2144.0)
    gg_rct_DoorwayOpen4 = Rect(9440.0, 3136.0, 9760.0, 3296.0)
    gg_rct_Portal_2_Out = Rect(2368.0, -576.0, 2528.0, -352.0)
    gg_rct_Portal1_In = Rect(6752.0, 1376.0, 7008.0, 1792.0)
    gg_rct_Cry3 = Rect(4544.0, 3552.0, 5248.0, 4096.0)
    gg_rct_Barkeep_walk = Rect(-672.0, 256.0, -608.0, 352.0)
    gg_rct_RedKeyDoor = Rect(5120.0, 1056.0, 5440.0, 1472.0)
    gg_rct_Grave1 = Rect(6336.0, 1504.0, 6528.0, 1696.0)
    gg_rct_Grave2 = Rect(7200.0, 1472.0, 7392.0, 1664.0)
    gg_rct_Grave3 = Rect(6752.0, 800.0, 6944.0, 992.0)
    gg_rct_Cry4 = Rect(2592.0, -448.0, 3136.0, 0.0)
    gg_rct_BlueKeyDoor = Rect(6400.0, -3648.0, 6720.0, -3040.0)
    gg_rct_Trap2 = Rect(8704.0, -1600.0, 8768.0, -1312.0)
    gg_rct_Trap1 = Rect(8608.0, -1600.0, 8672.0, -1312.0)
    gg_rct_Trap3 = Rect(8672.0, -1312.0, 8768.0, -992.0)
    gg_rct_Button_yard = Rect(8480.0, -1248.0, 8672.0, -1056.0)
    gg_rct_Rat_In = Rect(8672.0, -2112.0, 8800.0, -2016.0)
end

function CreateCameras()
    gg_cam_Cinematic1 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_ROTATION, 89.8, 0.0)
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_ANGLE_OF_ATTACK, 334.8, 0.0)
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_TARGET_DISTANCE, 1127.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic1, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_Cinematic1, -5694.8, -1913.5, 0.0)
    gg_cam_Camera_003 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_ROTATION, 89.8, 0.0)
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_ANGLE_OF_ATTACK, 300.0, 0.0)
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_TARGET_DISTANCE, 1650.0, 0.0)
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_NEARZ, 100.0, 0.0)
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Camera_003, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_Camera_003, -177.7, 6515.7, 0.0)
    gg_cam_Cinematic2 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_ROTATION, 90.6, 0.0)
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_ANGLE_OF_ATTACK, 339.8, 0.0)
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_TARGET_DISTANCE, 1500.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic2, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_Cinematic2, -5694.9, -1913.5, 0.0)
    gg_cam_Cinematic3 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_ROTATION, 208.6, 0.0)
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_ANGLE_OF_ATTACK, 336.9, 0.0)
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_TARGET_DISTANCE, 1996.5, 0.0)
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic3, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_Cinematic3, -6202.4, -2976.1, 0.0)
    gg_cam_Cinematic4 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_ROTATION, 273.3, 0.0)
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_ANGLE_OF_ATTACK, 320.9, 0.0)
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_TARGET_DISTANCE, 699.8, 0.0)
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_FARZ, 5000.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic4, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_Cinematic4, -5657.1, -3064.8, 0.0)
    gg_cam_Cinematic5 = CreateCameraSetup()
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_ZOFFSET, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_ROTATION, 352.5, 0.0)
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_ANGLE_OF_ATTACK, 347.8, 0.0)
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_TARGET_DISTANCE, 1024.5, 0.0)
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_ROLL, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_FIELD_OF_VIEW, 70.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_FARZ, 4545.5, 0.0)
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_NEARZ, 16.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_LOCAL_PITCH, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_LOCAL_YAW, 0.0, 0.0)
    CameraSetupSetField(gg_cam_Cinematic5, CAMERA_FIELD_LOCAL_ROLL, 0.0, 0.0)
    CameraSetupSetDestPosition(gg_cam_Cinematic5, -4103.9, -2029.7, 0.0)
end

--CUSTOM_CODE
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 11.10.2020 17:34
---
function HealUnit(hero,amount,flag,eff)
    --1  nil  
    --2 
    if not eff then eff="Abilities\\Spells\\Human\\Heal\\HealTarget" end
    local p=GetOwningPlayer(hero)
    local MaxHP=BlzGetUnitMaxHP(hero)
    local CurrentHP=GetUnitState(hero,UNIT_STATE_LIFE)
    local LoosingHP=MaxHP-CurrentHP
    local OverHeal=amount-LoosingHP
    local TotalHeal=amount
    if LoosingHP<=amount then TotalHeal=LoosingHP	end
    DestroyEffect(AddSpecialEffectTarget(eff,hero,"overhead"))
    SetUnitState(hero,UNIT_STATE_LIFE,CurrentHP+TotalHeal)
    if TotalHeal>1 then
        FlyTextTagHealXY(GetUnitX(hero),GetUnitY(hero),"+"..R2I(TotalHeal),p)
    end
    if not flag or flag==1 then
        return TotalHeal
    end
    if  flag==2 then
        return OverHeal
    end
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 10.01.2020 23:44
---
---@param x real
---@param y real
---@return boolean
function InMapXY(x, y)
	return x > GetRectMinX(bj_mapInitialPlayableArea) and x < GetRectMaxX(bj_mapInitialPlayableArea) and y > GetRectMinY(bj_mapInitialPlayableArea) and y < GetRectMaxY(bj_mapInitialPlayableArea)
end

---@param x real
---@param distance real
---@param angle real radian
---@return real
function GetPolarOffsetX(x, distance, angle)
	return x + distance * math.cos(angle)
end

---@param y real
---@param distance real
---@param angle real radian
---@return real
function GetPolarOffsetY(y, distance, angle)
	return y + distance * math.sin(angle)
end

---@param x real
---@param distance real
---@param angle real degrees
---@return real
function MoveX(x, distance, angle)
	return x + distance * math.cos(angle * bj_DEGTORAD)
end

---@param y real
---@param distance real
---@param angle real degrees
---@return real
function MoveY(y, distance, angle)
	return y + distance * math.sin(angle * bj_DEGTORAD)
end


local GetTerrainZ_location = Location(0, 0)
---@param x real
---@param y real
---@return real
function GetTerrainZ(x, y)
	MoveLocation(GetTerrainZ_location, x, y)
	return GetLocationZ(GetTerrainZ_location)
end

---@param target unit
---@return real
function GetUnitZ(target)
	MoveLocation(GetTerrainZ_location, GetUnitX(target), GetUnitY(target))
	return GetLocationZ(GetTerrainZ_location) + GetUnitFlyHeight(target)
end

---@param target unit
---@param z real
function SetUnitZ(target, z)
	UnitAddAbility(target, FourCC('Aave'))
	UnitRemoveAbility(target, FourCC('Aave'))
	MoveLocation(GetTerrainZ_location, GetUnitX(target), GetUnitY(target))
	SetUnitFlyHeight(target, z - GetLocationZ(GetTerrainZ_location), 0)
end

---@param h real        (x = d / 2)
---@param d real    
---@param x real      ,      
---@return real
function ParabolaZ (h, d, x)
	return (4 * h / d) * (d - x) * (x / d)
end

---@param zs real      
---@param ze real      
---@param h real      (x = d / 2)
---@param d real    
---@param x real      
---@return real
function GetParabolaZ(zs, ze, h, d, x)
	return (2 * (zs + ze - 2 * h) * (x / d - 1) + (ze - zs)) * (x / d) + zs
end

---@param xa real
---@param ya real
---@param xb real
---@param yb real
---@return real
function DistanceBetweenXY(xa, ya, xb, yb)
	local dx = xb - xa
	local dy = yb - ya
	return math.sqrt(dx * dx + dy * dy)
end

---@param xa real
---@param ya real
---@param za real
---@param xb real
---@param yb real
---@param zb real
---@return real
function DistanceBetweenXYZ(xa, ya, za, xb, yb, zb)
	local dx = xb - xa
	local dy = yb - ya
	local dz = zb - za
	return math.sqrt(dx * dx + dy * dy + dz * dz)
end

---@param xa real
---@param ya real
---@param xb real
---@param yb real
---@return real radian
function AngleBetweenXY(xa, ya, xb, yb)
	return math.atan(yb - ya, xb - xa)
end

---@param a real radian
---@param b real radian
---@return real radian
function AngleDifference(a, b)
	local c---@type real
	local d---@type real
	if a > b then
		c = a - b
		d = b - a + 2 * math.pi
	else
		c = b - a
		d = a - b + 2 * math.pi
	end
	return c > d and d or c
end

--@author https://xgm.guru/p/wc3/warden-math
---@param a real degrees
---@param b real degrees
---@return real degrees
function AngleDifferenceDeg(a, b)
	a, b = math.abs(a, 360), math.abs(b, 360)
	local x---@type real
	if (a > b) then
		a, b = b, a
	end
	x = b - 360
	if (b - a > a - x) then
		b = x
	end
	return math.abs(a - b)
end

--     ,  xa, ya, xb, yb  ,  xc, yc
--@author https://xgm.guru/p/wc3/perpendicular
---@param xa real
---@param ya real
---@param xb real
---@param yb real
---@param xc real
---@param yc real
---@return real
function Perpendicular (xa, ya, xb, yb, xc, yc)
	return math.sqrt((xa - xc) * (xa - xc) + (ya - yc) * (ya - yc)) * math.sin(math.atan(yc - ya, xc - xa) - math.atan(yb - ya, xb - xa))
end

--@Hate https://xgm.guru/p/wc3/241479
---@param source unit
---@param x real
---@param y real
function SetUnitPositionSmooth(source, x, y)
	local last_x = GetUnitX(source)
	local last_y = GetUnitY(source)
	local bx
	local by
	--print(" ")
	SetUnitPosition(source, x, y)
	if (RAbsBJ(GetUnitX(source) - x) > 0.5) or (RAbsBJ(GetUnitY(source) - y) > 0.5) then
		SetUnitPosition(source, x, last_y)
		bx = RAbsBJ(GetUnitX(source) - x) <= 0.5
		SetUnitPosition(source, last_x, y)
		by = RAbsBJ(GetUnitY(source) - y) <= 0.5

		---
		local dx=math.abs(x-last_x)
		if dx>=100 then
			print("    Smooth"..dx )
		end
		---
		if bx then
			SetUnitPosition(source, x, last_y)
		elseif by then
			SetUnitPosition(source, last_x, y)
		else
			SetUnitPosition(source, last_x, last_y)
		end
	end
end

--Bergi
function GetUnitXY(unit)
	return GetUnitX(unit),GetUnitY(unit)
end

function MoveXY(x,y, distance, angle)
	return x + distance * math.cos(angle * bj_DEGTORAD),y + distance * math.sin(angle * bj_DEGTORAD)
end

function UnitCollisionOFF(unit)
	UnitAddAbility(unit,FourCC('A000'))
	IssueImmediateOrder(unit,"windwalk")
end

function AngleBetweenUnits(caster,target)
	local yb,ya,xb,xa=GetUnitY(target),GetUnitY(caster),GetUnitX(target),GetUnitX(caster)
	return Atan2BJ(yb - ya, xb - xa)
end

function math.clamp (inb, low, high)
	return math.min( math.max(inb, low ), high )
end

function math.lerp(a, b, t)
	return a + (b - a) * t
end

function repeatN(t, m)
	return math.clamp(t - math.floor(t / m) * m, 0, m)
end

function lerpTheta(a, b, t)
	local dt = repeatN(b - a, 360)
	if dt>180 then	dt=dt-360 end
	return math.lerp(a, a + dt, t)
end

function AngleBetweenXYZ(x1, y1,z1, x2, y2,z2)
	local a=x1*x2+y1*y2+z1*z2
	local b=math.sqrt(x1*x1+y1*y1+z1*z1)
	local c=math.sqrt(x2*x2+y2*y2+z2*z2)
	return math.acos(a/(b*c))
end

--    
-- x1, x2 -   
-- x2, y2 -   
-- orientation -     
-- width -     
-- radius -    
function IsPointInSector(x1,y1,x2,y2,orientation,width,radius)
	local lenght=DistanceBetweenXY(x1,y1,x2,y2)
	local angle=Acos(Cos(orientation*bj_DEGTORAD)*(x1-x2)/lenght+Sin(orientation*bj_DEGTORAD)*(y1-y2)/lenght )*bj_RADTODEG
	return angle<=width and lenght<=radius
end

function GetParabolaPitch(height,distance,i, speed)
	local f = function(x)
		return ParabolaZ(height, distance, x)
	end

	local df = function(x)
		return ParabolaZDerivative(height, distance, x)
	end
	local x0 = i * speed
	local x1 = x0 + speed
	local thisZ = f(x0)
	local someTangentZ = Tangent(f, df, x0, x1)
	return math.atan(someTangentZ - thisZ, x1 - x0)--pitch
end
function Tangent(f, df, x0, x)
	return f(x0) + df(x0) * (x - x0)
end
function ParabolaZDerivative(height, distance, x)
	return 4 * height / distance / distance * (distance - 2 * x)
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 21.10.2020 0:13
do
    WLD={ --   
        [1]=FourCC('YTfc'),
        [2]=FourCC('YTLb'),
        [3]=FourCC('YtLc'),
        [4]=FourCC('YTac'),
        [5]=FourCC('YTpc'),
        [6]=FourCC('YTab'),
        [7]=FourCC('YTfb'),
        [8]=FourCC('YTpb'),

    }
end

do
    TimerStart(CreateTimer(), .1, false, function()
        InitMouseMoveTrigger()
        --InitWASD(hero) --    
    end)

end

TIMER_PERIOD=1/64
HERO={}
function InitHeroTable(hero)
    perebor=CreateGroup()
    HERO[0]={
        UnitHero=hero,
        ReleaseW=false,
        ReleaseS=false,
        ReleaseD=false,
        ReleaseA=false,
        ReleaseLMB=false,
        ReleaseRMB=false,
        isAttacking=false,
        isCharging=false,
        isMoving=false,
        DropInventory=true,
        isShield=false,
        ShieldEff=nil,
    }
end


function InitWASD(hero)
    --print("initwasdSTART")
    InitHeroTable(hero)
    CreateWASDActions()
    BlockMouse()
    EnableDragSelect(false, false)
    BlzEnableSelections(false, false)
    local data=HERO[0]
    local angle=0

    local speed=5
    local animWalk=0
--[[
    print("testanim")
    local index=0
    TimerStart(CreateTimer(),2, true, function()
        SetUnitAnimationByIndex(hero,index)
        print(index)
        index=index+1
    end)]]
    animStand=0
    TimerStart(CreateTimer(),TIMER_PERIOD, true, function()
        data.UnitHero=mainHero --    
        hero=mainHero --    
        animWalk=animWalk+TIMER_PERIOD
        if animWalk>=0.933 then --  WALK
            --print(animWalk)
            animWalk=0
        end
        if GetUnitTypeId(hero)==FourCC("H000") then --  
            IndexAnimationWalk=1
            IndexAnimationAttack=5
            IndexAnimationCharge=6
        elseif GetUnitTypeId(hero)==FourCC("Hpal") then   --  
            IndexAnimationWalk=0
            IndexAnimationAttack=GetRandomInt(12,13)
            IndexAnimationCharge=16
        elseif GetUnitTypeId(hero)==FourCC("nrat") then   -- 
            IndexAnimationWalk=1
            IndexAnimationAttack=2
            --IndexAnimationAttack=GetRandomInt(12,13)
        elseif GetUnitTypeId(hero)==FourCC("h002") then   --  
            IndexAnimationWalk=1
        end
        -- 
        if data.DropInventory and IsUnitType(mainHero,UNIT_TYPE_HERO) then
            local range=150
            local x,y=GetUnitXY(hero)
            SetRect(GlobalRect, x - range, y - range, x + range, y +range)
            EnumItemsInRect(GlobalRect,nil,function()
                UnitAddItem(hero,GetEnumItem())
                if GetItemType(GetEnumItem()) == ITEM_TYPE_POWERUP then
                    SetItemPosition(GetEnumItem(),-7000,-3000) --    
                    RemoveItem(GetEnumItem())
                end
            end)
        end


        data.IsMoving=false
        if data.ReleaseW and data.ReleaseD == false and data.ReleaseA == false then
            --print("only w")
            angle = 90
            data.IsMoving = true
        end
        if data.ReleaseW and data.ReleaseD then
            --print("w+d")
            angle = 90 - 45
            data.IsMoving = true
        end
        if data.ReleaseW and data.ReleaseA then
            --print("w+s")
            angle = 90 + 45
            data.IsMoving = true
        end

        if data.ReleaseS and data.ReleaseD == false and data.ReleaseA == false then
            angle = 270
            data.IsMoving = true
        end
        if data.ReleaseS and data.ReleaseD then
            angle = 270 + 45
            data.IsMoving = true
        end
        if data.ReleaseS and data.ReleaseA then
            angle = 270 - 45
            data.IsMoving = true
        end

        if data.ReleaseD and data.ReleaseW == false and data.ReleaseS == false then
            angle = 0
            data.IsMoving = true
        end

        if data.ReleaseA and data.ReleaseW == false and data.ReleaseS == false then
            angle = 180
            data.IsMoving = true
        end

        if not UnitAlive(hero) then
            data.ReleaseW=false
            data.ReleaseA=false
            data.ReleaseS=false
            data.ReleaseD=false
        end

        if not data.isAttacking and UnitAlive(hero) and not data.isShield then
            if data.IsMoving then
                local x,y=GetUnitXY(hero)
                local nx,ny=MoveXY(x,y,speed,angle)
                SetUnitFacing(hero, angle)
                SetUnitPositionSmooth(hero,nx,ny)
                if animWalk==0 then
                    SetUnitAnimationByIndex(hero,IndexAnimationWalk)
                    --print("w")
                    animStand=3
                end
            else
                --if animWalk==0 then

                animStand=animStand+TIMER_PERIOD
                if animStand>=2 then --  WALK
                    --print(animWalk)
                    ResetUnitAnimation(hero)
                    animStand=0
                end
                --end
                --print("r")--..GetUnitName(mainHero)
            end
        else
            --print("onattaking")
        end


    end)
end

function CreateWASDActions()
    -----------------------------------------------------------------OSKEY_W
    local gg_trg_EventUpW = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpW, Player(i), OSKEY_W, 0, true)
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpW, Player(i), OSKEY_UP, 0, true)
    end
    TriggerAddAction(gg_trg_EventUpW, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseW and not data.isAttacking  and  UnitAlive(data.UnitHero) then
            data.ReleaseW = true
            SelectUnitForPlayerSingle(mainHero,Player(0))
            if not data.isAttacking and not data.isShield then

                UnitAddForceSimple(data.UnitHero,90,5, 15)
                animStand=3
                SetUnitAnimationByIndex(data.UnitHero,IndexAnimationWalk)
            end

        end
    end)
    local TrigDepressW = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressW, Player(i), OSKEY_W, 0, false)
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressW, Player(i), OSKEY_UP, 0, false)
    end
    TriggerAddAction(TrigDepressW, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseW = false
    end)
    -----------------------------------------------------------------OSKEY_S
    local gg_trg_EventUpS = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpS, Player(i), OSKEY_S, 0, true)
        BlzTriggerRegisterPlayerKeyEvent(gg_trg_EventUpS, Player(i), OSKEY_DOWN, 0, true)
    end
    TriggerAddAction(gg_trg_EventUpS, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseS and not data.isAttacking and UnitAlive(data.UnitHero) then
            data.ReleaseS = true
            SelectUnitForPlayerSingle(mainHero,Player(0))
            if not data.isAttacking and not data.isShield then
                animStand=3
                UnitAddForceSimple(data.UnitHero,270,5, 15)
                SetUnitAnimationByIndex(data.UnitHero,IndexAnimationWalk)

            end
        end
    end)
    local TrigDepressS = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressS, Player(i), OSKEY_S, 0, false)
        BlzTriggerRegisterPlayerKeyEvent(TrigDepressS, Player(i), OSKEY_DOWN, 0, false)
    end
    TriggerAddAction(TrigDepressS, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseS = false
    end)
    -----------------------------------------------------------------OSKEY_D
    local TrigPressD = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigPressD, Player(i), OSKEY_D, 0, true)
        BlzTriggerRegisterPlayerKeyEvent(TrigPressD, Player(i), OSKEY_RIGHT, 0, true)
    end
    TriggerAddAction(TrigPressD, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseD and not data.isAttacking  and UnitAlive(data.UnitHero) then
            data.ReleaseD = true
            SelectUnitForPlayerSingle(mainHero,Player(0))
            if not data.isAttacking and not data.isShield then
                animStand=3
                UnitAddForceSimple(data.UnitHero,0,5, 15)
                SetUnitAnimationByIndex(data.UnitHero,IndexAnimationWalk)

            end
        end
    end)
    local TrigDePressD = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDePressD, Player(i), OSKEY_D, 0, false)
        BlzTriggerRegisterPlayerKeyEvent(TrigDePressD, Player(i), OSKEY_RIGHT, 0, false)
    end
    TriggerAddAction(TrigDePressD, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseD = false

    end)
    -----------------------------------------------------------------OSKEY_A
    local TrigPressA = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigPressA, Player(i), OSKEY_A, 0, true)
        BlzTriggerRegisterPlayerKeyEvent(TrigPressA, Player(i), OSKEY_LEFT, 0, true)
    end
    TriggerAddAction(TrigPressA, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        if not data.ReleaseA and not data.isAttacking  and  UnitAlive(data.UnitHero) then
            data.ReleaseA = true
            SelectUnitForPlayerSingle(mainHero,Player(0))
            if not data.isAttacking and not data.isShield then
                animStand=3
                UnitAddForceSimple(data.UnitHero,180,5, 15)
                SetUnitAnimationByIndex(data.UnitHero,IndexAnimationWalk)

            end
        end
    end)
    local TrigDePressA = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        BlzTriggerRegisterPlayerKeyEvent(TrigDePressA, Player(i), OSKEY_A, 0, false)
        BlzTriggerRegisterPlayerKeyEvent(TrigDePressA, Player(i), OSKEY_LEFT, 0, false)
    end
    TriggerAddAction(TrigDePressA, function()
        local pid = GetPlayerId(GetTriggerPlayer())
        local data = HERO[pid]
        data.ReleaseA = false
    end)
    -----------------------------------------------------------------LMB
    local TrigPressLMB = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        TriggerRegisterPlayerEvent(TrigPressLMB, Player(i), EVENT_PLAYER_MOUSE_DOWN)
    end
    TriggerAddAction(TrigPressLMB, function()
        --print("any")
        if BlzGetTriggerPlayerMouseButton() == MOUSE_BUTTON_TYPE_LEFT then
            --     LMB

            local pid = GetPlayerId(GetTriggerPlayer())

            GetPlayerMouseX[pid]=BlzGetTriggerPlayerMouseX()
            GetPlayerMouseY[pid]=BlzGetTriggerPlayerMouseY()

            local data = HERO[pid]
            if  UnitAlive(data.UnitHero) then
                if data.ReleaseRMB  then
                    --Charge(data)
                end
                attack(data)
            else
                --print(" ")
            end
        end
    end)
    local TrigDePressLMB = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        TriggerRegisterPlayerEvent(TrigDePressLMB, Player(i), EVENT_PLAYER_MOUSE_UP)
    end

    TriggerAddAction(TrigDePressLMB, function()
        --print("any")
        if BlzGetTriggerPlayerMouseButton() == MOUSE_BUTTON_TYPE_LEFT then
            local pid = GetPlayerId(GetTriggerPlayer())
            local data = HERO[pid]
            data.ReleaseLMB = false
        end
    end)
    -----------------------------------------------------------------RMB
    local TrigPressRMB = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        TriggerRegisterPlayerEvent(TrigPressRMB, Player(i), EVENT_PLAYER_MOUSE_DOWN)
    end
    TriggerAddAction(TrigPressRMB, function()
        if BlzGetTriggerPlayerMouseButton() == MOUSE_BUTTON_TYPE_RIGHT then
            --   
            local pid = GetPlayerId(GetTriggerPlayer())

            GetPlayerMouseX[pid]=BlzGetTriggerPlayerMouseX()
            GetPlayerMouseY[pid]=BlzGetTriggerPlayerMouseY()

            local data = HERO[pid]
            --data.Shield=true

            if  UnitAlive(data.UnitHero)  then --and IsUnitType(data.UnitHero,UNIT_TYPE_HERO)
                if not data.isAttacking  and GetUnitTypeId(data.UnitHero)==FourCC('Hpal') then --
                    data.isShield=true
                    UnitAddAbility(data.UnitHero,FourCC("A003"))
                    UnitAddAbility(data.UnitHero,FourCC("A004"))
                    data.ReleaseW=false
                    data.ReleaseA=false
                    data.ReleaseS=false
                    data.ReleaseD=false
                    ResetUnitAnimation(data.UnitHero)
                    --data.ShieldEff=AddSpecialEffectTarget("Abilities\\Spells\\Human\\ManaShield\\ManaShieldCaster",data.UnitHero,"origin")
                end

                if data.ReleaseLMB then
                   -- Charge(data)
                end
                if not data.ReleaseRMB then
                    data.ReleaseRMB = true
                    --Charge(data)
                end

            end
        end
    end)
    local TrigDePressRMB = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        TriggerRegisterPlayerEvent(TrigDePressRMB, Player(i), EVENT_PLAYER_MOUSE_UP)
    end
    TriggerAddAction(TrigDePressRMB, function()
        --print("depress")
        if BlzGetTriggerPlayerMouseButton() == MOUSE_BUTTON_TYPE_RIGHT then
            local pid = GetPlayerId(GetTriggerPlayer())
            local data = HERO[pid]
            local hero = data.UnitHero
            data.ReleaseRMB = false
           -- print(" ")
            if data.isShield then
                UnitRemoveAbility(data.UnitHero,FourCC("A003"))
                UnitRemoveAbility(data.UnitHero,FourCC("A004"))
                --DestroyEffect(data.ShieldEff)
                --print(" ")
                data.isShield=false
            end

            if UnitAlive(hero) then

            end
        end
    end)
end
---MouseX,MouseY=0,0
function BlockMouse()
    local this=CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(this, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER)
    TriggerRegisterAnyUnitEventBJ(this, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER)
    TriggerAddAction(this, function()
      --  MouseX,MouseY=GetPlayerMouseX
       --print(OrderId2String(GetUnitCurrentOrder(mainHero)))
        if OrderId2String(GetUnitCurrentOrder(mainHero))=="dropitem" then
            HERO[0].DropInventory=false
            TimerStart(CreateTimer(), 2, false, function()
                HERO[0].DropInventory=true
            end)
        end

        if OrderId2String(GetUnitCurrentOrder(mainHero))=="smart" or OrderId2String(GetUnitCurrentOrder(mainHero))=="move"  then --  ,     
            BlzPauseUnitEx(mainHero,true)
            BlzPauseUnitEx(mainHero,false)
        end
    end)
end
function attack(data)
    if not data.ReleaseLMB and  UnitAlive(data.UnitHero) and not IsUnitPaused(data.UnitHero) and not data.isShield then
        data.ReleaseLMB = true
        if not data.isAttacking  and not data.isCharging then
            --print(" ,      ")
            --print("a "..GetUnitName(mainHero))
            data.isAttacking=true

            local state={data.ReleaseW,data.ReleaseA,data.ReleaseS,data.ReleaseD}
            data.ReleaseW=false
            data.ReleaseA=false
            data.ReleaseS=false
            data.ReleaseD=false
            SetUnitAnimationByIndex(data.UnitHero,IndexAnimationAttack)
            local angle=-180+AngleBetweenXY(GetPlayerMouseX[0],GetPlayerMouseY[0],GetUnitX(data.UnitHero),GetUnitY(data.UnitHero))/bj_DEGTORAD
            SetUnitFacing(data.UnitHero,angle)
            TimerStart(CreateTimer(), 0.5, false, function()
                local damage=25
                local nx,ny=MoveXY(GetUnitX(data.UnitHero),GetUnitY(data.UnitHero),100,GetUnitFacing(data.UnitHero))
                if IsUnitType(data.UnitHero,UNIT_TYPE_HERO) then
                    UnitDamageArea(data.UnitHero,damage,nx,ny,100)
                end
            end)

            TimerStart(CreateTimer(), 0.8, false, function()
                data.isAttacking=false
                data.ReleaseLMB = false
            end)
        end
    end
end

function Shield(data)
    if not data.isShield and GetUnitTypeId(data.UnitHero)==FourCC('Hpal') then

    end
end



function dash(data) --,  
    if not data.isDash and not data.isCharging then
        data.isDash=true
        local angle=-180+AngleBetweenXY(GetPlayerMouseX[0],GetPlayerMouseY[0],GetUnitXY(data.UnitHero))/bj_DEGTORAD
        UnitAddForceSimple(data.UnitHero,angle,10,200)
        SetUnitAnimationByIndex(data.UnitHero,6)
        TimerStart(CreateTimer(), 0.3, false, function()
            data.isDash=false
        end)
    end
end

function Charge(data) --  
    if not data.isCharging and GetUnitTypeId(data.UnitHero)==FourCC('Hpal') then --    
        data.isCharging=true
        local angle=-180+AngleBetweenXY(GetPlayerMouseX[0],GetPlayerMouseY[0],GetUnitXY(data.UnitHero))/bj_DEGTORAD
        UnitAddForceSimple(data.UnitHero,angle,20,300)
        SetUnitFacing(data.UnitHero,angle)
        SetUnitAnimationByIndex(data.UnitHero,IndexAnimationCharge)


        TimerStart(CreateTimer(), 0.15,false, function()
            if data.IsMoving then
                SetUnitAnimationByIndex(data.UnitHero,IndexAnimationWalk)
            else
               ResetUnitAnimation(data.UnitHero)
            end
            --print(" ")
           -- data.isCharging=false
        end)

        TimerStart(CreateTimer(), 2, false, function()
            --print(" ")
            data.isCharging=false
        end)
    end
end


onForces = {}
function UnitAddForceSimple(hero, angle, speed, distance)
    --      
    local currentdistance = 0
    if onForces[GetHandleId(hero)] == nil then
        onForces[GetHandleId(hero)] = true
    end
    if not IsUnitType(hero, UNIT_TYPE_STRUCTURE) and onForces[GetHandleId(hero)]  then
        onForces[GetHandleId(hero)]=false
        TimerStart(CreateTimer(), TIMER_PERIOD, true, function()
            currentdistance = currentdistance + speed
            --print(currentdistance)
            local x, y = GetUnitX(hero), GetUnitY(hero)
            local newX, newY = MoveX(x, speed, angle), MoveY(y, speed, angle)
            SetUnitPositionSmooth(hero, newX, newY)
            if IsUnitType(hero,UNIT_TYPE_HERO) and HERO[0].isCharging then
                local e=nil
                GroupEnumUnitsInRange(perebor,newX, newY,200,nil)
                while true do
                    e = FirstOfGroup(perebor)
                    if e == nil then break end
                    if UnitAlive(e) and (IsUnitEnemy(e,GetOwningPlayer(hero)) or GetOwningPlayer(e)==Player(PLAYER_NEUTRAL_PASSIVE)) and IsUnitVisible(e,GetOwningPlayer(hero))  then
                        UnitAddForceSimple(e,-180+AngleBetweenXY(GetUnitX(e),GetUnitY(e),GetUnitXY(e)),20,200)
                    end
                    GroupRemoveUnit(perebor,e)
                end
            end

            if currentdistance >= distance then
                --or (data.OnWater and data.OnTorrent==false)
                --data.IsDisabled=false
                --data.OnWater=false
                if IsUnitType(hero,UNIT_TYPE_HERO) then
                    if HERO[0].isCharging then
                        --print(" ")
                        --DestroyTimer(GetExpiredTimer())
                        --onForces[GetHandleId(hero)]=true
                        --HERO[0].isCharging=false
                        ResetUnitAnimation(hero)
                    end
                end
                DestroyTimer(GetExpiredTimer())
                onForces[GetHandleId(hero)]=true
                --print("stop cur="..currentdistance.." dist="..distance)
            end
        end)
    end
end

GetPlayerMouseX = {}
GetPlayerMouseY = {}
function InitMouseMoveTrigger()
    local MouseMoveTrigger = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        local player = Player(i)
        TriggerRegisterPlayerEvent(MouseMoveTrigger, player, EVENT_PLAYER_MOUSE_MOVE)
        GetPlayerMouseX[i] = 0
        GetPlayerMouseY[i] = 0
    end
    TriggerAddAction(MouseMoveTrigger, function()
        local id = GetPlayerId(GetTriggerPlayer())
        if BlzGetTriggerPlayerMouseX() ~= 0 then
            GetPlayerMouseX[id] = BlzGetTriggerPlayerMouseX()
            GetPlayerMouseY[id] = BlzGetTriggerPlayerMouseY()
        end
    end)
end

function UnitDamageArea(u,damage,x,y,range)
    local isdamage=false
    local e=nil
    local hero=nil
    GroupEnumUnitsInRange(perebor,x,y,range,nil)
    while true do
        e = FirstOfGroup(perebor)
        if e == nil then break end
        if UnitAlive(e) and UnitAlive(u) and (IsUnitEnemy(e,GetOwningPlayer(u)) or GetOwningPlayer(e)==Player(PLAYER_NEUTRAL_PASSIVE)) then
            UnitDamageTarget( u, e, damage, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS )
            isdamage=true
            hero=e
        end
        GroupRemoveUnit(perebor,e)
    end
    if PointContentDestructable(x,y,range,true,1+damage,u) then	isdamage=true	end
    return isdamage, hero
end

GlobalRect=Rect(0,0,0,0)
function PointContentDestructable (x,y,range,iskill,damage)
    local content=false
    if range==nil then range=80 end
    if iskill==nil then iskill=false end
    SetRect(GlobalRect, x - range, y - range, x + range, y +range)
    EnumDestructablesInRect(GlobalRect,nil,function ()
        local d=GetEnumDestructable()
        if GetDestructableLife(d)>0 then
            content=true
            if iskill then
                SetDestructableLife(d,GetDestructableLife(d)-damage)
                if GetDestructableLife(d)>=1 then
                    SetDestructableAnimation(d,"Stand Hit")
                end
                --KillDestructable(d)
            end
        end
    end)
    return content
end

---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 27.05.2020 23:15
---
local realTimerStart = TimerStart
TimerStart = function(timer, duration, repeating, callback)
	local pcallback = function()
		if callback == nil then return end
		local status, err = pcall(callback)
		if not status then
			print(err)
		end
	end
	realTimerStart(timer, duration, repeating, pcallback)
end

local realTriggerAddAction = TriggerAddAction
TriggerAddAction = function(trig, callback)
	local pcallback = function()
		local status, err = pcall(callback)
		if not status then
			print(err)
		end
	end
	realTriggerAddAction(trig, pcallback)
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 30.04.2020 0:04
stunEff="Abilities\\Spells\\Human\\Thunderclap\\ThunderclapTarget"
StunSystem={}
function StunUnit(hero,dur)
	if not StunSystem[GetHandleId(hero)] then
	--	print("  ")
		StunSystem[GetHandleId(hero)]={
			Time=0,
			Eff=nil,
			Timer=nil
		}
	end
	local data=StunSystem[GetHandleId(hero)]
	local curdur=0
	if data.Time==0 then
		data.Timer=CreateTimer()
		--print("  ")
		data.Eff=AddSpecialEffectTarget(stunEff,hero,"overhead")
		BlzPauseUnitEx(hero,true)
	end

	if data.Time<dur  then
		--print("  ,  ")
		data.Time=dur
	else
		--print("      ")
		return
	end

	TimerStart(data.Timer, 0.1, true, function()
		curdur=curdur+0.1
		data.Time=data.Time-0.1
		if curdur>=dur or not UnitAlive(hero) then
			--print("  ")
			BlzPauseUnitEx(hero,false)
			DestroyTimer(GetExpiredTimer())
			data.Time=0
			DestroyEffect(data.Eff)
			data.Timer=nil
		end
	end)
end

function StunArea(hero,range,duration,x,y)
	local e=nil
	GroupEnumUnitsInRange(perebor,x,y,range,nil)
	while true do
		e = FirstOfGroup(perebor)
		if e == nil then break end
		if UnitAlive(e) and IsUnitEnemy(e,GetOwningPlayer(hero)) and not IsUnitType(e,UNIT_TYPE_STRUCTURE) then
			StunUnit(e,duration)
		end
		GroupRemoveUnit(perebor,e)
	end
end
---@param text string
---@param textSize real
---@param x real
---@param y real
---@param z real
---@param red integer
---@param green integer
---@param blue integer
---@param alpha integer
---@param xvel real
---@param yvel real
---@param fadepoint real
---@param lifespan real
---@param player player
---@return texttag
function FlyTextTag(text, textSize, x, y, z, red, green, blue, alpha, xvel, yvel, fadepoint, lifespan, player)
	local t = CreateTextTag()
	SetTextTagText(t, text, textSize)
	SetTextTagPos(t, x, y, z)
	SetTextTagColor(t, red, green, blue, alpha)
	SetTextTagVelocity(t, xvel, yvel)
	SetTextTagFadepoint(t, fadepoint)
	SetTextTagLifespan(t, lifespan)
	SetTextTagPermanent(t, false)
	if player ~= nil then
		SetTextTagVisibility(t, player == GetLocalPlayer())
	end
	return t
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagGoldBounty(target, text, player)
	return FlyTextTag(text, 0.024, GetWidgetX(target) - 16, GetWidgetY(target), 0, 255, 220, 0, 255, 0, 0.03, 2, 3, player)
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagLumberBounty(target, text, player)
	return FlyTextTag(text, 0.024, GetWidgetX(target) - 16, GetWidgetY(target), 0, 0, 200, 80, 255, 0, 0.03, 2, 3, player)
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagMiss(target, text, player)
	return FlyTextTag(text, 0.024, GetWidgetX(target), GetWidgetY(target), 0, 255, 0, 0, 255, 0, 0.03, 1, 3, player)
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagCriticalStrike(target, text, player)
	return FlyTextTag(text, 0.024, GetWidgetX(target), GetWidgetY(target), 0, 255, 0, 0, 255, 0, 0.04, 2, 5, player)
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagManaBurn(target, text, player)
	return FlyTextTag(text, 0.024, GetWidgetX(target), GetWidgetY(target), 0, 82, 82, 255, 255, 0, 0.04, 2, 5, player)
end

---@param target widget
---@param text string
---@param player player
---@return texttag
function FlyTextTagShadowStrike(target, text, player)
	return FlyTextTag(text, 0.024, GetWidgetX(target), GetWidgetY(target), 0, 160, 255, 0, 255, 0, 0.04, 2, 5, player)
end

function FlyTextTagHealXY(x,y, text, player)
	return FlyTextTag(text, 0.024, x, y, 150, 88, 250, 13, 255, 0, 0.03, 1, 3, player)
end

function FlyTextTagShieldXY(x,y, text, player)--
	local xr=GetRandomReal(-0.05,0,05)
	return FlyTextTag(""..text, 0.018, x, y, 150, 128, 128, 128, 255, xr, 0.03, 1, 3, player)
end

function StaticTag(text, textSize, x, y, z, red, green, blue, alpha, xvel, yvel, fadepoint, lifespan, player)
	local t = CreateTextTag()
	SetTextTagText(t, text, textSize)
	SetTextTagPos(t, x, y, z)
	SetTextTagColor(t, red, green, blue, alpha)
	--SetTextTagVelocity(t, xvel, yvel)
	SetTextTagFadepoint(t, fadepoint)
	SetTextTagLifespan(t, lifespan)
	SetTextTagPermanent(t, false)
	if player ~= nil then
		SetTextTagVisibility(t, player == GetLocalPlayer())
	end
	return t
end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 28.10.2020 19:30
---
do
    TimerStart(CreateTimer(), 0.11, false, function()
        InitCastMC()
    end)
end
tempHero=nil
function InitCastMC()
    local SpellTrigger = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        local player = Player(i)
        TriggerRegisterPlayerUnitEvent(SpellTrigger, player, EVENT_PLAYER_UNIT_SPELL_CAST)
    end
    TriggerAddAction(SpellTrigger, function()
        if GetSpellAbilityId() == FourCC('A005') then -- 
            local caster=GetTriggerUnit()
            local target=GetSpellTargetUnit()
            --print("  "..GetUnitName(target))
            TimerStart(CreateTimer(), 1, false, function()
                UnitAddAbility(caster,FourCC("A003"))
                UnitAddAbility(caster,FourCC("A004"))
                UnitAddAbility(target,FourCC("A006")) --  
                mainHero=target
                udg_mainHero=target
                tempHero=caster
                SelectUnitForPlayerSingle(mainHero,Player(0))
                SetUnitOwner(target,Player(0),true)
                TimerStart(CreateTimer(), 1, true, function()
                    if not UnitAlive(target) then
                        DestroyTimer(GetExpiredTimer())
                        mainHero=caster
                        udg_mainHero=caster
                        UnitRemoveAbility(caster,FourCC("A003"))
                        UnitRemoveAbility(caster,FourCC("A004"))
                        SelectUnitForPlayerSingle(mainHero,Player(0))
                    end
                end)
            end)
            --SelectUnitForPlayerSingle()
        end
        if GetSpellAbilityId() == FourCC('A006') then -- 
            local caster=GetTriggerUnit()
            local amount=GetUnitState(caster,UNIT_STATE_LIFE)
            SetUnitExploded(caster,true)
            KillUnit(caster)
            HealUnit(tempHero,amount)
        end

    end)

end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 28.10.2020 19:30
---
do
    TimerStart(CreateTimer(), 0.11, false, function()
        InitSpire()
    end)
end

function InitSpire()
    local SpellTrigger = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        local player = Player(i)
        TriggerRegisterPlayerUnitEvent(SpellTrigger, player, EVENT_PLAYER_UNIT_SPELL_CAST)
    end
    TriggerAddAction(SpellTrigger, function()
        if GetSpellAbilityId() == FourCC('A007') then --
            local caster=GetTriggerUnit()
            local x,y=GetSpellTargetX(),GetSpellTargetY()
            local xs,ys=GetUnitXY(caster)
            local angle=AngleBetweenXY(xs,ys,x,y)/bj_DEGTORAD
            local eff=AddSpecialEffect("Abilities\\Weapons\\Dryadmissile\\Dryadmissile.mdl",xs,ys)
            local dist=600
            local speed=15
            local curDist=0
            BlzSetSpecialEffectYaw(eff, math.rad(angle))
            TimerStart(CreateTimer(), 1/64, true, function()
                curDist=curDist+speed
                local nx,ny=MoveXY(xs,ys,curDist,angle)
                BlzSetSpecialEffectPosition(eff,nx,ny,GetTerrainZ(nx,ny)+60)

                local e=nil
                GroupEnumUnitsInRange(perebor,nx,ny,70,nil)
                while true do
                    e = FirstOfGroup(perebor)
                    if e == nil then break end
                    if UnitAlive(e) and UnitAlive(caster) and (IsUnitEnemy(e,GetOwningPlayer(caster)) or GetOwningPlayer(e)==Player(PLAYER_NEUTRAL_PASSIVE)) then
                        local nxe,nye=MoveXY(GetUnitX(e),GetUnitY(e),speed,angle)
                        if not PointContentDestructable (nx,ny,70) then
                            SetUnitX(e,nxe)
                            SetUnitY(e,nye)
                        end
                        --UnitDamageTarget( caster, e, 100, true, false, ATTACK_TYPE_NORMAL, DAMAGE_TYPE_NORMAL, WEAPON_TYPE_WHOKNOWS )
                    end
                    GroupRemoveUnit(perebor,e)
                end


                if curDist>=dist  then
                    DestroyEffect(eff)
                    DestroyTimer(GetExpiredTimer())
                    UnitDamageArea(caster,10,nx,ny,70)
                end

                if PointContentDestructable (nx,ny,70) then
                    DestroyEffect(eff)
                    DestroyTimer(GetExpiredTimer())
                    UnitDamageArea(caster,10,nx,ny,70)
                    StunArea(caster,100,2,nx,ny)
                end

            end)
        end
    end)
end


---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 29.10.2020 16:32
---
do
    TimerStart(CreateTimer(), 0.11, false, function()
        InitStunPerDie()
    end)
end
function InitStunPerDie()
    local DamageTrigger = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        TriggerRegisterPlayerUnitEvent(DamageTrigger, Player(i), EVENT_PLAYER_UNIT_DAMAGING) --   
    end
    TriggerAddAction(DamageTrigger, function()

        local damage     = GetEventDamage() --  
        if damage < 1 then return end
        local eventId         = GetHandleId(GetTriggerEventId())
        local isEventDamaging = eventId == GetHandleId(EVENT_PLAYER_UNIT_DAMAGING)
        local target          = GetTriggerUnit() --    
        local caster          = GetEventDamageSource() --    


        if isEventDamaging then
            TimerStart(CreateTimer(), 0.11, false, function()
                if UnitAlive(target) and GetUnitStatePercent(target,UNIT_STATE_LIFE,UNIT_STATE_MAX_LIFE)<=30 and GetOwningPlayer(target)~=Player(0) and GetUnitLevel(target)<=5 then
                    StunUnit(target,5)
                    UnitAddType(target,UNIT_TYPE_UNDEAD)
                    SetUnitOwner(target,PLAYER_NEUTRAL_PASSIVE,true)
                   -- print("  ?")
                end
            end)
        end
    end)

end
---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 18.10.2020 19:39
---
---
portrait="war3mapImported\\avatar_alive.blp"
portraitVampire="war3mapImported\\avatar_kain.blp"
bagT="war3mapImported\\bag.dds"
empBar="war3mapImported\\VbarEMP.dds"
mainHero=nil --     

do
    TimerStart(CreateTimer(), .1, false, function()
        --HideEverything()
       -- BlzFrameSetVisible(BlzGetFrameByName("ConsoleUIBackdrop", 0), false) --  
        BlzFrameSetAbsPoint ( BlzGetFrameByName ( "ConsoleUIBackdrop" , 0 ) , FRAMEPOINT_TOPRIGHT , 0 , - 0,8 )
        BlzHideOriginFrames(true)
        BlzEnableUIAutoPosition ( false )
        local GAME_UI     = BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0)
        local WORLD_FRAME = BlzGetOriginFrame(ORIGIN_FRAME_WORLD_FRAME, 0)
        BlzFrameSetAllPoints(WORLD_FRAME, GAME_UI)

        BlzFrameSetAlpha(BlzGetFrameByName("SimpleInventoryCover", 0), 0) --   
        BlzFrameSetAbsPoint(BlzGetFrameByName("SimpleInventoryCover", 0),FRAMEPOINT_BOTTOM,-1000,-1000)

        BlzFrameSetVisible(BlzGetOriginFrame(ORIGIN_FRAME_PORTRAIT, 0), false)
        BlzFrameSetSize(BlzGetOriginFrame(ORIGIN_FRAME_PORTRAIT, 0), 0, 0)
        BlzFrameSetAbsPoint(BlzGetOriginFrame(ORIGIN_FRAME_PORTRAIT, 0),FRAMEPOINT_BOTTOM,-1000,-1000)

        BlzFrameClearAllPoints(BlzGetOriginFrame(ORIGIN_FRAME_UBERTOOLTIP, 0)) --      
        BlzFrameSetPoint(BlzGetOriginFrame(ORIGIN_FRAME_UBERTOOLTIP, 0), FRAMEPOINT_BOTTOM, BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), FRAMEPOINT_BOTTOM, 0, 0.08)


        for i = 0,11 do --  
            --print(".. "..i)
            BlzFrameClearAllPoints(BlzGetFrameByName("CommandButton_"..i, 0))
            BlzFrameSetAbsPoint(BlzGetFrameByName("CommandButton_"..i, 0),FRAMEPOINT_CENTER,1,1)
            --
        end

        CreateQWERDFG()
        --ShowInventory()
        MenuFrame()
        ShowFPSPINGAPM()
        CreatePortrait()
        --CreateBars()
        InitSelectionRegister()
        CreateInfoFrames()
        --RepositionMSG()
    end)
end
function HideEverything()
    --BlzFrameSetVisible(BlzGetFrameByName("ConsoleUIBackdrop", 0), false)
    for i = 0, 11 do
        --BlzFrameSetVisible(BlzGetFrameByName("CommandButton_"..i, 0), false) --
       -- BlzFrameSetSize(BlzGetFrameByName("CommandButton_" .. i, 0), 0, 0)--,     
    end
    BlzHideOriginFrames(true)-- 
end

function ShowInventory()
    local next=0.039/1.3
    local step=(next*6)+next/2
    BlzFrameSetVisible(BlzFrameGetParent(BlzGetOriginFrame(ORIGIN_FRAME_ITEM_BUTTON, 0)), true)
    BlzFrameSetAlpha(BlzGetFrameByName("SimpleInventoryCover", 0), 0)
    local infoPanel=BlzFrameGetParent(BlzGetFrameByName("SimpleInfoPanelUnitDetail",0)) --   
    BlzFrameClearAllPoints(infoPanel)
    BlzFrameSetVisible(infoPanel,true)
    BlzFrameSetAbsPoint(infoPanel, FRAMEPOINT_CENTER, 0,9) --0,9   

    for i = 0, 5 do
        local item = BlzGetOriginFrame(ORIGIN_FRAME_ITEM_BUTTON, i)
        BlzFrameSetVisible(item, true)
        BlzFrameClearAllPoints(item)
        BlzFrameSetSize(item, next, next)
        BlzFrameSetAbsPoint(item,FRAMEPOINT_BOTTOM,0.31+next/2+(next*i),0.04)

        local bag = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_WORLD_FRAME, 0), '', 0)
        BlzFrameSetParent(bag, BlzGetFrameByName("ConsoleUIBackdrop", 0))
        BlzFrameSetTexture(bag, bagT, 0, true)
        BlzFrameSetSize(bag, next*1.1, next*1.1)
        BlzFrameSetAbsPoint(bag,FRAMEPOINT_BOTTOM,0.31+next/2+(next*i),0.04)

    end
end

function MenuFrame()
    BlzFrameSetVisible(BlzGetFrameByName("UpperButtonBarFrame",0),true)
    for i=0,3 do
        --local i=0
        local f10=BlzGetOriginFrame(ORIGIN_FRAME_SYSTEM_BUTTON, i)
        if i==0 then
            BlzFrameSetParent(f10, BlzGetFrameByName("ConsoleUIBackdrop", 0))
            BlzFrameSetVisible(f10, true)
            BlzFrameClearAllPoints(f10)
            BlzFrameSetAbsPoint(f10, FRAMEPOINT_CENTER, 0.65+(0.08*2) ,0.59)
        elseif i==1 then
            BlzFrameSetVisible(f10, false)
        elseif i==2 then
            BlzFrameSetVisible(f10, false)
        elseif i==3 then
            BlzFrameSetParent(f10, BlzGetFrameByName("ConsoleUIBackdrop", 0))
            BlzFrameSetVisible(f10, true)
            BlzFrameClearAllPoints(f10)
            BlzFrameSetAbsPoint(f10, FRAMEPOINT_CENTER, 0.65+(0.08*i) ,0.59)
        end
    end
end

function CreateQWERDFG()
    local next=0.039
    local last=0
    for i=8,11 do --QWER
        BlzFrameSetAbsPoint(BlzGetFrameByName("CommandButton_"..i, 0), FRAMEPOINT_CENTER, 0.07-next+next*i ,next/2)
        last=0.07-next+next*i
    end
    for i=4,7 do --FGTH
        BlzFrameSetAbsPoint(BlzGetFrameByName("CommandButton_"..i, 0), FRAMEPOINT_CENTER, last-next*3+next*i ,next/2)
    end
    --BlzFrameSetAbsPoint(BlzGetFrameByName("CommandButton_"..0, 0), FRAMEPOINT_CENTER, 0.4 ,next*1,5) --
end

function ShowFPSPINGAPM()
    BlzFrameSetVisible(BlzGetFrameByName("ResourceBarFrame",0),true)
    local fps=BlzGetFrameByName("ResourceBarFrame",0)
    BlzFrameClearAllPoints(fps)
    BlzFrameSetAbsPoint(fps, FRAMEPOINT_CENTER, 0.87 ,0.62)
end

function CreatePortrait()
    local buttonIconFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
    BlzFrameSetParent(buttonIconFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(buttonIconFrame, portrait, 0, true)
    BlzFrameSetSize(buttonIconFrame, 0.085, 0.16)
    BlzFrameSetAbsPoint(buttonIconFrame, FRAMEPOINT_CENTER, -0.08, 0.49)
    TimerStart(CreateTimer(), 0.05, true, function()
        if mainHero then
            if GetUnitTypeId(mainHero)~=FourCC("H000") then
                --print("   ")
                BlzFrameSetTexture(buttonIconFrame, portraitVampire, 0, true)
                DestroyTimer(GetExpiredTimer())
            end
        end
    end)
end

function CreateBars(hero,index)
    local nextBar=0.02
    local x,y=-0.02+index*nextBar, 0.49
    local into = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
    BlzFrameSetParent(into, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(into, "Replaceabletextures\\Teamcolor\\Teamcolor0"..index..".blp", 0, true)
    BlzFrameSetSize(into, 0.0195, 0)
    BlzFrameSetAbsPoint(into, FRAMEPOINT_BOTTOM,x,y-0.075)
    local buttonIconFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
    BlzFrameSetParent(buttonIconFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetTexture(buttonIconFrame, empBar, 0, true)
    BlzFrameSetSize(buttonIconFrame, 0.02, 0.16)
    BlzFrameSetAbsPoint(buttonIconFrame, FRAMEPOINT_CENTER,x,y)

    local textMax = BlzCreateFrameByType("TEXT", "ButtonChargesText", buttonIconFrame, "", 0)
    BlzFrameSetPoint(textMax, FRAMEPOINT_BOTTOM, buttonIconFrame, FRAMEPOINT_BOTTOM, 0.,0.01)
    BlzFrameSetText(textMax, "100")

    local textCurrent = BlzCreateFrameByType("TEXT", "ButtonChargesText", buttonIconFrame, "", 0)
    BlzFrameSetPoint(textCurrent, FRAMEPOINT_TOP, buttonIconFrame, FRAMEPOINT_TOP, 0.,-0.01)
    BlzFrameSetText(textCurrent, "100")

    local per1=0.16/100
    local sec=0
    TimerStart(CreateTimer(), 0.05, true, function()
        --print(per1)
        sec=sec+per1
        --print(sec)
        if sec>=0.15 then
            DestroyTimer(GetExpiredTimer())
            TimerStart(CreateTimer(), 0.05, true, function()
                local hp=0
                if index==0 then
                    hp=GetUnitLifePercent(mainHero)
                    BlzFrameSetText(textCurrent, R2I(GetUnitState(mainHero,UNIT_STATE_LIFE)))
                    BlzFrameSetText(textMax, R2I(BlzGetUnitMaxHP(mainHero)))
                else
                    hp=GetUnitManaPercent(mainHero)
                    BlzFrameSetText(textCurrent, R2I(GetUnitState(mainHero,UNIT_STATE_MANA)))
                    BlzFrameSetText(textMax, R2I(BlzGetUnitMaxMana(mainHero)))
                end


                BlzFrameSetSize(into, 0.0195, hp*0.15/100)
            end)
        end
        BlzFrameSetSize(into, 0.0195, sec)
        --BlzFrameSetAbsPoint(into, FRAMEPOINT_CENTER,x,y-(0.16+sec))
    end)
end

function InitSelectionRegister()
    local this = CreateTrigger()
    for i = 0, bj_MAX_PLAYER_SLOTS - 1 do
        TriggerRegisterPlayerUnitEvent(this, Player(i), EVENT_PLAYER_UNIT_SELECTED, nil)
    end
    TriggerAddAction(this, function()
        local hero=GetTriggerUnit()
        --print(GetUnitName(hero))
        if IsUnitType(hero,UNIT_TYPE_HERO)   then
            if GetOwningPlayer(hero)==GetTriggerPlayer()  then

                if not mainHero then
                    --print("    ")
                    mainHero=hero
                    InitWASD(mainHero)
                    --print("initwasd")
                    ShowInventory()
                    CreateBars(hero,0)
                    CreateBars(hero,1)
                    --InitWASD(mainHero)
                end
            end
        end
    end)
end

function RepositionMSG()
    local frame=BlzGetOriginFrame(ORIGIN_FRAME_UNIT_MSG, 0)
    BlzFrameClearAllPoints(frame)
    BlzFrameSetParent(frame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetAbsPoint(frame,FRAMEPOINT_TOPLEFT,0.0,0.7) -- fatal upper > 0.4
end

function CreateInfoFrames()
    local scale=0.039/2
    local x,y=-0.10,0.395
    CreateEmptyGlue("ReplaceableTextures\\CommandButtons\\BTNThoriumMelee.blp",scale,x+scale*0,y,1)-- 
    CreateEmptyGlue("ReplaceableTextures\\CommandButtons\\BTNHumanArmorUpTwo.blp",scale,x+scale*2.2,y,2)-- 
    CreateEmptyGlue("ReplaceableTextures\\CommandButtons\\BTNAnkh.blp",scale,x+scale*4.4,y,3)-- 
end

function CreateEmptyGlue(texture,scale,posX,posY,flag)
    local SelfFrame = BlzCreateFrameByType('GLUEBUTTON', 'FaceButton', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), 'ScoreScreenTabButtonTemplate', 0)
    local buttonIconFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', SelfFrame, '', 0)

    BlzFrameSetParent(SelfFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetParent(buttonIconFrame, BlzGetFrameByName("ConsoleUIBackdrop", 0))

    BlzFrameSetAllPoints(buttonIconFrame, SelfFrame)
    BlzFrameSetTexture(buttonIconFrame, texture, 0, true)
    BlzFrameSetSize(SelfFrame, scale, scale)
    BlzFrameSetAbsPoint(SelfFrame, FRAMEPOINT_CENTER, posX, posY)

    local textCurrent = BlzCreateFrameByType("TEXT", "ButtonChargesText", BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), "", 0)
    BlzFrameSetAbsPoint(textCurrent, FRAMEPOINT_LEFT,  posX+scale/2,posY) --posX+scale
    BlzFrameSetScale(textCurrent,1)

    BlzFrameSetParent(textCurrent, BlzGetFrameByName("ConsoleUIBackdrop", 0))
    BlzFrameSetText(textCurrent, "unknown")

    TimerStart(CreateTimer(), 0.05, true, function()
        if flag==1 then
            --print(" ")
            local damage=0
            if UnitHasItemOfTypeBJ(mainHero,FourCC('ratf')) then
                damage=damage+15
            end
            BlzFrameSetText(textCurrent, " "..R2I(damage+BlzGetUnitBaseDamage(mainHero,0)))
        elseif flag==2 then
            BlzFrameSetText(textCurrent, " "..R2I(BlzGetUnitArmor(mainHero)))
        elseif flag==3 then
            BlzFrameSetText(textCurrent, " "..GetPlayerState(Player(0),PLAYER_STATE_RESOURCE_LUMBER))
        end
    end)
    return SelfFrame
end


---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by Bergi.
--- DateTime: 28.10.2020 22:45
---
do
    TimerStart(CreateTimer(), 0.11, false, function()
        InitPUI()
    end)
end
secToHideItem=0
function InitPUI()

    local frame,text=CreateInfoItemBOX()
    local this = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(this, EVENT_PLAYER_UNIT_PICKUP_ITEM)
    TriggerAddAction(this, function()
        local item=GetManipulatedItem()
        BlzFrameSetVisible(frame,true)
        BlzFrameSetTexture(frame,BlzGetItemIconPath(item),0,true)
        BlzFrameSetAlpha(frame,255)
        BlzFrameSetText(text, "You acquired new item:      |cffffcc00"..GetItemName(item).."|r")
                --|cffffcc001- :|r
        local p=1/64
        secToHideItem=secToHideItem+6
        TimerStart(CreateTimer(), p, true, function()
            secToHideItem=secToHideItem-p
            if secToHideItem<=0 then
                DestroyTimer(GetExpiredTimer())
                BlzFrameSetVisible(frame,false)
            end
            if secToHideItem<=2.5 then
                BlzFrameSetAlpha(frame,R2I(secToHideItem*100))
            end
        end)

    end)

end

function CreateInfoItemBOX()
    local x,y=0.45,0.15
    local buttonIconFrame = BlzCreateFrameByType('BACKDROP', 'FaceButtonIcon', BlzGetOriginFrame(ORIGIN_FRAME_GAME_UI, 0), '', 0)
    BlzFrameSetTexture(buttonIconFrame, "texture", 0, true)
    BlzFrameSetSize(buttonIconFrame, 0.039/2, 0.039/2)
    BlzFrameSetAbsPoint(buttonIconFrame, FRAMEPOINT_LEFT, x, y)

    local textCurrent = BlzCreateFrameByType("TEXT", "ButtonChargesText", buttonIconFrame, "", 0)
    BlzFrameSetAbsPoint(textCurrent, FRAMEPOINT_LEFT,  x-0.21, y)
    BlzFrameSetScale(textCurrent,2)
    BlzFrameSetText(textCurrent, "You acquired new item:      ")
    BlzFrameSetVisible(buttonIconFrame,false)
    return buttonIconFrame,textCurrent
end
--CUSTOM_CODE
function Trig_Tips_1_Conditions()
    if (not (GetManipulatedItem() == gg_item_manh_0008)) then
        return false
    end
    return true
end

function Trig_Tips_1_Actions()
    DisableTrigger(GetTriggeringTrigger())
    PlaySoundBJ(gg_snd_Kain3)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_199", nil, "TRIGSTR_200", bj_TIMETYPE_ADD, 0, true)
end

function InitTrig_Tips_1()
    gg_trg_Tips_1 = CreateTrigger()
    TriggerRegisterUnitEvent(gg_trg_Tips_1, gg_unit_Hpal_0002, EVENT_UNIT_PICKUP_ITEM)
    TriggerAddCondition(gg_trg_Tips_1, Condition(Trig_Tips_1_Conditions))
    TriggerAddAction(gg_trg_Tips_1, Trig_Tips_1_Actions)
end

function Trig_Tips_2_Conditions()
    if (not (GetManipulatedItem() == gg_item_lmbr_0011)) then
        return false
    end
    return true
end

function Trig_Tips_2_Actions()
    DisableTrigger(GetTriggeringTrigger())
    PlaySoundBJ(gg_snd_Kain2)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_197", nil, "TRIGSTR_198", bj_TIMETYPE_ADD, 0, true)
end

function InitTrig_Tips_2()
    gg_trg_Tips_2 = CreateTrigger()
    TriggerRegisterUnitEvent(gg_trg_Tips_2, gg_unit_Hpal_0002, EVENT_UNIT_PICKUP_ITEM)
    TriggerAddCondition(gg_trg_Tips_2, Condition(Trig_Tips_2_Conditions))
    TriggerAddAction(gg_trg_Tips_2, Trig_Tips_2_Actions)
end

function Trig_Tips_3_Conditions()
    if (not (GetManipulatedItem() == gg_item_I000_0009)) then
        return false
    end
    return true
end

function Trig_Tips_3_Actions()
    DisableTrigger(GetTriggeringTrigger())
    PlaySoundBJ(gg_snd_Kain4Mana)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_195", nil, "TRIGSTR_196", bj_TIMETYPE_ADD, 0, true)
end

function InitTrig_Tips_3()
    gg_trg_Tips_3 = CreateTrigger()
    TriggerRegisterUnitEvent(gg_trg_Tips_3, gg_unit_Hpal_0002, EVENT_UNIT_PICKUP_ITEM)
    TriggerAddCondition(gg_trg_Tips_3, Condition(Trig_Tips_3_Conditions))
    TriggerAddAction(gg_trg_Tips_3, Trig_Tips_3_Actions)
end

function Trig_Intro_1_Actions()
    ClearMapMusicBJ()
    PlayMusicBJ(gg_snd_Blood_Omen__Legacy_of_Kain___Solemn_Dirge__Willendorf_u)
    PlayThematicMusicBJ("war3mapImported\\Blood Omen_ Legacy of Kain - Solemn Dirge (Willendorf).mp3")
    PauseUnitBJ(true, gg_unit_hfoo_0005)
    PauseUnitBJ(true, gg_unit_h001_0007)
    PauseUnitBJ(true, gg_unit_hfoo_0006)
    CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 0.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    TriggerSleepAction(0.01)
    UseTimeOfDayBJ(false)
    SetTimeOfDay(22.00)
    SelectUnitForPlayerSingle(gg_unit_H000_0004, Player(0))
    SetCameraTargetControllerNoZForPlayer(Player(0), gg_unit_H000_0004, 0, 150.00, false)
    TriggerSleepAction(1.00)
    PlaySoundBJ(gg_snd_Tavern1)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_187", nil, "TRIGSTR_188", bj_TIMETYPE_ADD, 0, true)
    PlaySoundBJ(gg_snd_Tavern2)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_189", nil, "TRIGSTR_190", bj_TIMETYPE_ADD, 0, true)
    TriggerSleepAction(2.50)
    PlaySoundBJ(gg_snd_Tavern3)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_191", nil, "TRIGSTR_192", bj_TIMETYPE_ADD, 0, true)
    TriggerSleepAction(3.00)
    CinematicModeBJ(false, GetPlayersAll())
    SetDoodadAnimationRectBJ("death alternate", FourCC("D001"), gg_rct_Bandits2)
    KillDestructable(gg_dest_YTfb_0705)
    KillDestructable(gg_dest_YTfb_0703)
    KillDestructable(gg_dest_YTfb_0704)
    PlaySoundBJ(gg_snd_Tavern4)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_193", nil, "TRIGSTR_194", bj_TIMETYPE_ADD, 0, true)
end

function InitTrig_Intro_1()
    gg_trg_Intro_1 = CreateTrigger()
    TriggerAddAction(gg_trg_Intro_1, Trig_Intro_1_Actions)
end

function Trig_Intro_2_Conditions()
    if (not (GetEnteringUnit() == gg_unit_H000_0004)) then
        return false
    end
    return true
end

function Trig_Intro_2_Func015A()
    IssueTargetOrderBJ(GetEnumUnit(), "attack", gg_unit_H000_0004)
end

function Trig_Intro_2_Func017A()
    IssueTargetOrderBJ(GetEnumUnit(), "attack", gg_unit_H000_0004)
end

function Trig_Intro_2_Actions()
    DisableTrigger(GetTriggeringTrigger())
    PauseUnitBJ(false, gg_unit_hfoo_0005)
    IssueTargetOrderBJ(gg_unit_hfoo_0005, "attack", gg_unit_H000_0004)
    PauseUnitBJ(false, gg_unit_h001_0007)
    IssueTargetOrderBJ(gg_unit_h001_0007, "attack", gg_unit_H000_0004)
    PauseUnitBJ(false, gg_unit_hfoo_0006)
    IssueTargetOrderBJ(gg_unit_hfoo_0006, "attack", gg_unit_H000_0004)
    PlaySoundBJ(gg_snd_Murder1)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_183", nil, "TRIGSTR_184", bj_TIMETYPE_ADD, 0, true)
    SetUnitPositionLoc(gg_unit_hpea_0000, GetRectCenter(gg_rct_Bandits_Barkeep))
    SetUnitAnimation(gg_unit_hpea_0000, "death")
    KillUnit(gg_unit_hpea_0000)
    CreateNUnitsAtLoc(3, FourCC("hfoo"), Player(11), GetRectCenter(gg_rct_Bandits1), bj_UNIT_FACING)
    ForGroupBJ(GetUnitsInRectAll(gg_rct_Bandits1), Trig_Intro_2_Func015A)
    CreateNUnitsAtLoc(3, FourCC("hfoo"), Player(11), GetRectCenter(gg_rct_Bandits2), bj_UNIT_FACING)
    ForGroupBJ(GetUnitsInRectAll(gg_rct_Bandits2), Trig_Intro_2_Func017A)
end

function InitTrig_Intro_2()
    gg_trg_Intro_2 = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Intro_2, gg_rct_Intro_Trap)
    TriggerAddCondition(gg_trg_Intro_2, Condition(Trig_Intro_2_Conditions))
    TriggerAddAction(gg_trg_Intro_2, Trig_Intro_2_Actions)
end

function Trig_Intro_3_Actions()
    DisableTrigger(GetTriggeringTrigger())
    CinematicModeBJ(true, GetPlayersAll())
    PauseUnitBJ(true, gg_unit_H000_0004)
    SetPlayerAllianceStateBJ(Player(0), Player(11), bj_ALLIANCE_NEUTRAL)
    SetPlayerAllianceStateBJ(Player(11), Player(0), bj_ALLIANCE_ALLIED)
    TriggerSleepAction(3.00)
    SetUnitLifePercentBJ(gg_unit_H000_0004, 1.00)
    SetUnitOwner(gg_unit_H000_0004, Player(PLAYER_NEUTRAL_PASSIVE), false)
    PlaySoundBJ(gg_snd_Murder2)
    IssueTargetOrderBJ(gg_unit_h001_0007, "attack", gg_unit_H000_0004)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_181", nil, "TRIGSTR_182", bj_TIMETYPE_ADD, 0, true)
end

function InitTrig_Intro_3()
    gg_trg_Intro_3 = CreateTrigger()
    TriggerRegisterUnitLifeEvent(gg_trg_Intro_3, gg_unit_H000_0004, LESS_THAN, 50.00)
    TriggerAddAction(gg_trg_Intro_3, Trig_Intro_3_Actions)
end

function Trig_Intro_4_Actions()
    PlaySoundBJ(gg_snd_Intro7)
    SetUnitPositionLoc(gg_unit_n000_0032, GetRectCenter(gg_rct_KotoBogSpawn2))
    TriggerSleepAction(2)
    CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    TriggerSleepAction(2)
    DisableTrigger(gg_trg_Fixed_Camera)
    ConditionalTriggerExecute(gg_trg_CinematicStart)
end

function InitTrig_Intro_4()
    gg_trg_Intro_4 = CreateTrigger()
    TriggerRegisterUnitEvent(gg_trg_Intro_4, gg_unit_H000_0004, EVENT_UNIT_DEATH)
    TriggerAddAction(gg_trg_Intro_4, Trig_Intro_4_Actions)
end

function Trig_CinematicStart_Actions()
    TriggerSleepAction(2.00)
    CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 2, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    TriggerSleepAction(2.00)
    CameraSetupApplyForPlayer(true, gg_cam_Cinematic1, Player(0), 0)
    TriggerSleepAction(2.00)
    CameraSetupApplyForPlayer(true, gg_cam_Cinematic2, Player(0), 2.00)
    TriggerSleepAction(3.00)
    CameraSetupApplyForPlayer(true, gg_cam_Cinematic3, Player(0), 0.00)
    TriggerSleepAction(1.00)
    IssuePointOrderLocBJ(gg_unit_unec_0079, "move", GetRectCenter(gg_rct_Cinematic_1))
    TriggerSleepAction(2.00)
    CameraSetupApplyForPlayer(true, gg_cam_Cinematic4, Player(0), 0.00)
    TriggerSleepAction(2.00)
    CameraSetupApplyForPlayer(true, gg_cam_Cinematic5, Player(0), 0.00)
    TriggerSleepAction(1.00)
    IssuePointOrderLocBJ(gg_unit_Hpal_0002, "move", GetRectCenter(gg_rct_Cinematic2))
    TriggerSleepAction(1.00)
    CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    TriggerSleepAction(2.00)
    SetUnitPositionLoc(gg_unit_Hpal_0002, GetRectCenter(gg_rct_KainStart))
    TriggerSleepAction(1.00)
    SetUnitOwner(gg_unit_Hpal_0002, Player(0), true)
    SetCameraTargetControllerNoZForPlayer(Player(0), gg_unit_Hpal_0002, 0, 150.00, false)
    TriggerSleepAction(2)
    PlaySoundBJ(gg_snd_Kain1)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_255", nil, "TRIGSTR_250", bj_TIMETYPE_ADD, 0, true)
    CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 5.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    QuestSetFailedBJ(udg_QuestIntro, true)
    CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_251", "TRIGSTR_252", "ReplaceableTextures\\CommandButtons\\BTNSacrifice.blp")
    CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_253", "TRIGSTR_254", "ReplaceableTextures\\CommandButtons\\BTNArthasFrost.blp")
    TriggerSleepAction(1.00)
    ClearMapMusicBJ()
    PlayMusicBJ(gg_snd_Blood_Omen__Legacy_of_Kain___Kain_s_Mausoleum)
    CinematicModeBJ(false, GetPlayersAll())
    EnableTrigger(gg_trg_Fixed_Camera)
    SelectUnitForPlayerSingle(gg_unit_Hpal_0002, Player(0))
    udg_mainHero = gg_unit_Hpal_0002
        mainHero=udg_mainHero
end

function InitTrig_CinematicStart()
    gg_trg_CinematicStart = CreateTrigger()
    TriggerAddAction(gg_trg_CinematicStart, Trig_CinematicStart_Actions)
end

function Trig_Closed1_Actions()
    DisableTrigger(GetTriggeringTrigger())
    PlaySoundBJ(gg_snd_tremblement)
    TriggerSleepAction(4.00)
    KillDestructable(gg_dest_YTfb_6073)
    KillDestructable(gg_dest_YTfb_6074)
    KillDestructable(gg_dest_YTfb_6075)
    KillDestructable(gg_dest_YTfb_6076)
    RemoveDestructable(gg_dest_B004_6078)
    SetDoodadAnimationRectBJ("hide", FourCC("D002"), gg_rct_LibraryClosed)
    SetDoodadAnimationRectBJ("show", FourCC("DObw"), gg_rct_LibraryOpen)
end

function InitTrig_Closed1()
    gg_trg_Closed1 = CreateTrigger()
    TriggerRegisterDeathEvent(gg_trg_Closed1, gg_dest_DTlv_6072)
    TriggerAddAction(gg_trg_Closed1, Trig_Closed1_Actions)
end

function Trig_RatKey_Func001Func013Func005C()
    if (UnitItemInSlotBJ(udg_mainHero, 1) == gg_item_spsh_0071) then
        return true
    end
    if (UnitItemInSlotBJ(udg_mainHero, 2) == gg_item_spsh_0071) then
        return true
    end
    if (UnitItemInSlotBJ(udg_mainHero, 3) == gg_item_spsh_0071) then
        return true
    end
    if (UnitItemInSlotBJ(udg_mainHero, 4) == gg_item_spsh_0071) then
        return true
    end
    if (UnitItemInSlotBJ(udg_mainHero, 5) == gg_item_spsh_0071) then
        return true
    end
    if (UnitItemInSlotBJ(udg_mainHero, 6) == gg_item_spsh_0071) then
        return true
    end
    return false
end

function Trig_RatKey_Func001Func013C()
    if (not Trig_RatKey_Func001Func013Func005C()) then
        return false
    end
    return true
end

function Trig_RatKey_Func001C()
    if (not (IsDestructableAliveBJ(gg_dest_DTfx_4421) == true)) then
        return false
    end
    return true
end

function Trig_RatKey_Actions()
    if (Trig_RatKey_Func001C()) then
        KillDestructable(gg_dest_DTfx_4421)
        PlaySoundBJ(gg_snd_BattleNetDoorsStereo2)
        KillDestructable(gg_dest_YTfb_4504)
        KillDestructable(gg_dest_YTfb_4505)
        KillDestructable(gg_dest_YTfb_4506)
        SetDoodadAnimationRectBJ("death alternate", FourCC("D001"), gg_rct_Region_028)
        if (Trig_RatKey_Func001Func013C()) then
            CreateDestructableLoc(FourCC("LTbr"), GetRectCenter(gg_rct_Rat_Barrel_Zone), GetRandomDirectionDeg(), 1, 0)
            udg_IsRatBlocked = true
            UnitRemoveItemSwapped(gg_item_spsh_0071, udg_mainHero)
            RemoveItem(GetLastRemovedItem())
        else
        end
    else
        DestructableRestoreLife(gg_dest_DTfx_4421, GetDestructableMaxLife(gg_dest_B003_3904), true)
        PlaySoundBJ(gg_snd_BattleNetDoorsStereo2)
        DestructableRestoreLife(gg_dest_YTfb_4504, GetDestructableMaxLife(gg_dest_YTfb_4504), true)
        DestructableRestoreLife(gg_dest_YTfb_4505, GetDestructableMaxLife(gg_dest_YTfb_4504), true)
        DestructableRestoreLife(gg_dest_YTfb_4506, GetDestructableMaxLife(gg_dest_YTfb_4504), true)
        SetDoodadAnimationRectBJ("stand", FourCC("D001"), gg_rct_Region_028)
    end
end

function InitTrig_RatKey()
    gg_trg_RatKey = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_RatKey, gg_rct_ButtonToLibrary)
    TriggerAddAction(gg_trg_RatKey, Trig_RatKey_Actions)
end

function Trig_RatKAggro_Conditions()
    if (not (GetEnteringUnit() == gg_unit_Hpal_0002)) then
        return false
    end
    return true
end

function Trig_RatKAggro_Func002C()
    if (not (IsDestructableAliveBJ(gg_dest_DTfx_4421) == false)) then
        return false
    end
    if (not (udg_IsRatBlocked == false)) then
        return false
    end
    return true
end

function Trig_RatKAggro_Actions()
    DisableTrigger(GetTriggeringTrigger())
    if (Trig_RatKAggro_Func002C()) then
        IssuePointOrderLocBJ(gg_unit_n002_0069, "move", GetRandomLocInRect(gg_rct_ButtonToLibrary))
        TriggerSleepAction(1.50)
        IssuePointOrderLocBJ(gg_unit_n002_0069, "move", GetRandomLocInRect(gg_rct_Rat_Start_Zone))
        TriggerSleepAction(1.50)
    else
    end
    EnableTrigger(GetTriggeringTrigger())
end

function InitTrig_RatKAggro()
    gg_trg_RatKAggro = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_RatKAggro, gg_rct_Rat_Leave_Zone)
    TriggerAddCondition(gg_trg_RatKAggro, Condition(Trig_RatKAggro_Conditions))
    TriggerAddAction(gg_trg_RatKAggro, Trig_RatKAggro_Actions)
end

function Trig_Open_Pass_1_Actions()
    DisableTrigger(GetTriggeringTrigger())
    PlaySoundBJ(gg_snd_tremblement)
    TriggerSleepAction(2.00)
    KillDestructable(gg_dest_YTfb_1741)
    KillDestructable(gg_dest_YTfb_1740)
    KillDestructable(gg_dest_YTfb_1739)
    KillDestructable(gg_dest_YTfb_0598)
    KillDestructable(gg_dest_YTfb_0597)
    KillDestructable(gg_dest_YTfb_0596)
    KillDestructable(gg_dest_YTfb_0595)
    SetDoodadAnimationRectBJ("hide", FourCC("D00K"), gg_rct_LibraryPass)
    SetDoodadAnimationRectBJ("hide", FourCC("D00K"), gg_rct_LibraryPass_2)
end

function InitTrig_Open_Pass_1()
    gg_trg_Open_Pass_1 = CreateTrigger()
    TriggerRegisterDeathEvent(gg_trg_Open_Pass_1, gg_dest_DTlv_4275)
    TriggerAddAction(gg_trg_Open_Pass_1, Trig_Open_Pass_1_Actions)
end

function Trig_Key1_Conditions()
    if (not (GetUnitTypeId(GetEnteringUnit()) ~= FourCC("nrat"))) then
        return false
    end
    return true
end

function Trig_Key1_Func002C()
    if (not (IsDestructableAliveBJ(gg_dest_B003_3904) == true)) then
        return false
    end
    return true
end

function Trig_Key1_Func003C()
    if (not (IsDestructableAliveBJ(gg_dest_B003_3906) == false)) then
        return false
    end
    if (not (IsDestructableAliveBJ(gg_dest_B003_3905) == false)) then
        return false
    end
    if (not (IsDestructableAliveBJ(gg_dest_B003_3904) == true)) then
        return false
    end
    return true
end

function Trig_Key1_Actions()
    if (Trig_Key1_Func002C()) then
        KillDestructable(gg_dest_B003_3904)
        PlaySoundBJ(gg_snd_BattleNetDoorsStereo2)
    else
        DestructableRestoreLife(gg_dest_B003_3904, GetDestructableMaxLife(gg_dest_B003_3904), true)
    end
    if (Trig_Key1_Func003C()) then
        TriggerExecute(gg_trg_Button_3)
        DisableTrigger(gg_trg_Key1)
        DisableTrigger(gg_trg_Key2)
        DisableTrigger(gg_trg_Key3)
    else
    end
end

function InitTrig_Key1()
    gg_trg_Key1 = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Key1, gg_rct_Tumbler1)
    TriggerAddCondition(gg_trg_Key1, Condition(Trig_Key1_Conditions))
    TriggerAddAction(gg_trg_Key1, Trig_Key1_Actions)
end

function Trig_Key2_Conditions()
    if (not (GetUnitTypeId(GetEnteringUnit()) ~= FourCC("nrat"))) then
        return false
    end
    return true
end

function Trig_Key2_Func002C()
    if (not (IsDestructableAliveBJ(gg_dest_B003_3905) == true)) then
        return false
    end
    return true
end

function Trig_Key2_Func003C()
    if (not (IsDestructableAliveBJ(gg_dest_B003_3906) == false)) then
        return false
    end
    if (not (IsDestructableAliveBJ(gg_dest_B003_3905) == false)) then
        return false
    end
    if (not (IsDestructableAliveBJ(gg_dest_B003_3904) == true)) then
        return false
    end
    return true
end

function Trig_Key2_Actions()
    if (Trig_Key2_Func002C()) then
        KillDestructable(gg_dest_B003_3905)
        PlaySoundBJ(gg_snd_BattleNetDoorsStereo2)
    else
        DestructableRestoreLife(gg_dest_B003_3905, GetDestructableMaxLife(gg_dest_B003_3904), true)
    end
    if (Trig_Key2_Func003C()) then
        TriggerExecute(gg_trg_Button_3)
        DisableTrigger(gg_trg_Key1)
        DisableTrigger(gg_trg_Key2)
        DisableTrigger(gg_trg_Key3)
    else
    end
end

function InitTrig_Key2()
    gg_trg_Key2 = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Key2, gg_rct_Tumbler2)
    TriggerAddCondition(gg_trg_Key2, Condition(Trig_Key2_Conditions))
    TriggerAddAction(gg_trg_Key2, Trig_Key2_Actions)
end

function Trig_Key3_Conditions()
    if (not (GetUnitTypeId(GetEnteringUnit()) ~= FourCC("nrat"))) then
        return false
    end
    return true
end

function Trig_Key3_Func002C()
    if (not (IsDestructableAliveBJ(gg_dest_B003_3906) == true)) then
        return false
    end
    return true
end

function Trig_Key3_Func003C()
    if (not (IsDestructableAliveBJ(gg_dest_B003_3906) == false)) then
        return false
    end
    if (not (IsDestructableAliveBJ(gg_dest_B003_3905) == false)) then
        return false
    end
    if (not (IsDestructableAliveBJ(gg_dest_B003_3904) == true)) then
        return false
    end
    return true
end

function Trig_Key3_Actions()
    if (Trig_Key3_Func002C()) then
        KillDestructable(gg_dest_B003_3906)
        PlaySoundBJ(gg_snd_BattleNetDoorsStereo2)
    else
        DestructableRestoreLife(gg_dest_B003_3906, GetDestructableMaxLife(gg_dest_B003_3904), true)
    end
    if (Trig_Key3_Func003C()) then
        TriggerExecute(gg_trg_Button_3)
        DisableTrigger(gg_trg_Key1)
        DisableTrigger(gg_trg_Key2)
        DisableTrigger(gg_trg_Key3)
    else
    end
end

function InitTrig_Key3()
    gg_trg_Key3 = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Key3, gg_rct_Tumbler3)
    TriggerAddCondition(gg_trg_Key3, Condition(Trig_Key3_Conditions))
    TriggerAddAction(gg_trg_Key3, Trig_Key3_Actions)
end

function Trig_LightOn_Func001C()
    if (GetUnitTypeId(GetEnteringUnit()) == FourCC("Hpal")) then
        return true
    end
    if (GetUnitTypeId(GetEnteringUnit()) == FourCC("Edmm")) then
        return true
    end
    return false
end

function Trig_LightOn_Conditions()
    if (not Trig_LightOn_Func001C()) then
        return false
    end
    return true
end

function Trig_LightOn_Func008C()
    if (not (udg_IntLightCheck == 0)) then
        return false
    end
    return true
end

function Trig_LightOn_Actions()
    SetTimeOfDay(12.00)
    SetTerrainFogExBJ(0, 500.00, 2500.00, 0, 25.00, 25.00, 20.00)
    TriggerSleepAction(0.10)
    EnableTrigger(gg_trg_LightDamage)
    ClearMapMusicBJ()
    PlayMusicBJ(gg_snd_102__Awakening)
    if (Trig_LightOn_Func008C()) then
        PlaySoundBJ(gg_snd_Kain5Light)
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_201", nil, "TRIGSTR_202", bj_TIMETYPE_ADD, 0, true)
        udg_IntLightCheck = 1
    else
    end
end

function InitTrig_LightOn()
    gg_trg_LightOn = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_LightOn, gg_rct_WallHide)
    TriggerRegisterEnterRectSimple(gg_trg_LightOn, gg_rct_Region_014)
    TriggerAddCondition(gg_trg_LightOn, Condition(Trig_LightOn_Conditions))
    TriggerAddAction(gg_trg_LightOn, Trig_LightOn_Actions)
end

function Trig_LightOff_Func001C()
    if (GetUnitTypeId(GetEnteringUnit()) == FourCC("Hpal")) then
        return true
    end
    if (GetUnitTypeId(GetEnteringUnit()) == FourCC("Edmm")) then
        return true
    end
    return false
end

function Trig_LightOff_Conditions()
    if (not Trig_LightOff_Func001C()) then
        return false
    end
    return true
end

function Trig_LightOff_Actions()
    SetTimeOfDay(0.00)
    SetTerrainFogExBJ(0, 0.00, 2000.00, 0, 0.00, 0.00, 0.00)
    DisableTrigger(gg_trg_LightDamage)
    ClearMapMusicBJ()
    PlayMusicBJ(gg_snd_Blood_Omen__Legacy_of_Kain___Kain_s_Mausoleum)
end

function InitTrig_LightOff()
    gg_trg_LightOff = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_LightOff, gg_rct_Region_011)
    TriggerRegisterEnterRectSimple(gg_trg_LightOff, gg_rct_EnterDark_2)
    TriggerAddCondition(gg_trg_LightOff, Condition(Trig_LightOff_Conditions))
    TriggerAddAction(gg_trg_LightOff, Trig_LightOff_Actions)
end

function Trig_LightDamage_Actions()
    SetUnitLifeBJ(gg_unit_Hpal_0002, (GetUnitStateSwap(UNIT_STATE_LIFE, gg_unit_Hpal_0002) - 1.00))
    AddSpecialEffectTargetUnitBJ("overhead", gg_unit_Hpal_0002, "Abilities\\Weapons\\AvengerMissile\\AvengerMissile.mdl")
    TriggerSleepAction(1.00)
    DestroyEffectBJ(GetLastCreatedEffectBJ())
end

function InitTrig_LightDamage()
    gg_trg_LightDamage = CreateTrigger()
    DisableTrigger(gg_trg_LightDamage)
    TriggerRegisterTimerEventPeriodic(gg_trg_LightDamage, 2)
    TriggerAddAction(gg_trg_LightDamage, Trig_LightDamage_Actions)
end

function Trig_Button_1_Conditions()
    if (not (GetEnteringUnit() == gg_unit_Hpal_0002)) then
        return false
    end
    return true
end

function Trig_Button_1_Actions()
    PlaySoundBJ(gg_snd_tremblement)
    CameraSetEQNoiseForPlayer(Player(0), 2.00)
    TriggerSleepAction(4.00)
    CameraClearNoiseForPlayer(Player(0))
    SetDoodadAnimationRectBJ("hide", FourCC("D00K"), gg_rct_WallHide)
    SetDestructableAnimationBJ(gg_dest_DTfx_0479, "stand alternate")
    KillDestructable(gg_dest_YTfb_0509)
    KillDestructable(gg_dest_YTfb_0508)
    KillDestructable(gg_dest_YTfb_0507)
    KillDestructable(gg_dest_YTfb_0506)
    DisableTrigger(GetTriggeringTrigger())
end

function InitTrig_Button_1()
    gg_trg_Button_1 = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Button_1, gg_rct_Button_1)
    TriggerAddCondition(gg_trg_Button_1, Condition(Trig_Button_1_Conditions))
    TriggerAddAction(gg_trg_Button_1, Trig_Button_1_Actions)
end

function Trig_Button_2_Actions()
    DisableTrigger(GetTriggeringTrigger())
    PlaySoundBJ(gg_snd_tremblement)
    TriggerSleepAction(4.00)
    KillDestructable(gg_dest_YTfb_0975)
    KillDestructable(gg_dest_YTfb_0977)
    KillDestructable(gg_dest_YTfb_0974)
    KillDestructable(gg_dest_YTfb_0976)
    KillDestructable(gg_dest_YTfb_0973)
    KillDestructable(gg_dest_YTfb_0972)
    SetDoodadAnimationRectBJ("death alternate", FourCC("D001"), gg_rct_Region_014)
    DisableTrigger(gg_trg_LightDamage)
    AddWeatherEffectSaveLast(gg_rct_Graveyard, FourCC("RAhr"))
    SetTerrainFogExBJ(0, 500.00, 2500.00, 0, 25.00, 25.00, 40.00)
    TriggerSleepAction(2.00)
    PlaySoundBJ(gg_snd_Kain6Rain)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_315", nil, "TRIGSTR_316", bj_TIMETYPE_ADD, 0, true)
end

function InitTrig_Button_2()
    gg_trg_Button_2 = CreateTrigger()
    TriggerRegisterDeathEvent(gg_trg_Button_2, gg_dest_DTlv_0696)
    TriggerAddAction(gg_trg_Button_2, Trig_Button_2_Actions)
end

function Trig_Button_3_Actions()
    DisableTrigger(GetTriggeringTrigger())
    PlaySoundBJ(gg_snd_tremblement)
    CameraSetEQNoiseForPlayer(Player(0), 2.00)
    TriggerSleepAction(4.00)
    CameraClearNoiseForPlayer(Player(0))
    SetDoodadAnimationRectBJ("death alternate", FourCC("D001"), gg_rct_Solve3)
    KillDestructable(gg_dest_YTfc_1351)
    KillDestructable(gg_dest_YTfc_1352)
    KillDestructable(gg_dest_YTfb_1353)
end

function InitTrig_Button_3()
    gg_trg_Button_3 = CreateTrigger()
    TriggerAddAction(gg_trg_Button_3, Trig_Button_3_Actions)
end

function Trig_Grave1_Conditions()
    if (not (GetEnteringUnit() == gg_unit_Hpal_0002)) then
        return false
    end
    return true
end

function Trig_Grave1_Func003C()
    if (not (R2I(RAbsBJ((GetUnitFacing(gg_unit_hrif_0204) - 45.00))) == 0)) then
        return false
    end
    if (not (R2I(RAbsBJ((GetUnitFacing(gg_unit_hrif_0225) - 135.00))) == 0)) then
        return false
    end
    if (not (R2I(RAbsBJ((GetUnitFacing(gg_unit_hrif_0227) - 90.00))) == 0)) then
        return false
    end
    return true
end

function Trig_Grave1_Actions()
    udg_ActiveGrave = gg_unit_hrif_0204
    BlzSetUnitFacingEx(udg_ActiveGrave, (GetUnitFacing(udg_ActiveGrave) + 45.00))
    if (Trig_Grave1_Func003C()) then
        DisableTrigger(gg_trg_Grave1)
        DisableTrigger(gg_trg_Grave2)
        DisableTrigger(gg_trg_Grave3)
        CreateNUnitsAtLoc(1, FourCC("hprt"), Player(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_Portal1_In), 270.00)
        PlaySoundBJ(gg_snd_UndeadDissipate2)
        SetUnitAnimation(GetLastCreatedUnit(), "birth")
        TriggerSleepAction(1.00)
        EnableTrigger(gg_trg_Portal1_Inn)
    else
    end
end

function InitTrig_Grave1()
    gg_trg_Grave1 = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Grave1, gg_rct_Grave1)
    TriggerAddCondition(gg_trg_Grave1, Condition(Trig_Grave1_Conditions))
    TriggerAddAction(gg_trg_Grave1, Trig_Grave1_Actions)
end

function Trig_Grave2_Conditions()
    if (not (GetEnteringUnit() == gg_unit_Hpal_0002)) then
        return false
    end
    return true
end

function Trig_Grave2_Func003C()
    if (not (R2I(RAbsBJ((GetUnitFacing(gg_unit_hrif_0204) - 45.00))) == 0)) then
        return false
    end
    if (not (R2I(RAbsBJ((GetUnitFacing(gg_unit_hrif_0225) - 135.00))) == 0)) then
        return false
    end
    if (not (R2I(RAbsBJ((GetUnitFacing(gg_unit_hrif_0227) - 90.00))) == 0)) then
        return false
    end
    return true
end

function Trig_Grave2_Actions()
    udg_ActiveGrave = gg_unit_hrif_0225
    BlzSetUnitFacingEx(udg_ActiveGrave, (GetUnitFacing(udg_ActiveGrave) + 45.00))
    if (Trig_Grave2_Func003C()) then
        DisableTrigger(gg_trg_Grave1)
        DisableTrigger(gg_trg_Grave2)
        DisableTrigger(gg_trg_Grave3)
        CreateNUnitsAtLoc(1, FourCC("hprt"), Player(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_Portal1_In), 270.00)
        PlaySoundBJ(gg_snd_UndeadDissipate2)
        SetUnitAnimation(GetLastCreatedUnit(), "birth")
        TriggerSleepAction(1.00)
        EnableTrigger(gg_trg_Portal1_Inn)
    else
    end
end

function InitTrig_Grave2()
    gg_trg_Grave2 = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Grave2, gg_rct_Grave2)
    TriggerAddCondition(gg_trg_Grave2, Condition(Trig_Grave2_Conditions))
    TriggerAddAction(gg_trg_Grave2, Trig_Grave2_Actions)
end

function Trig_Grave3_Conditions()
    if (not (GetEnteringUnit() == gg_unit_Hpal_0002)) then
        return false
    end
    return true
end

function Trig_Grave3_Func003C()
    if (not (R2I(RAbsBJ((GetUnitFacing(gg_unit_hrif_0204) - 45.00))) == 0)) then
        return false
    end
    if (not (R2I(RAbsBJ((GetUnitFacing(gg_unit_hrif_0225) - 135.00))) == 0)) then
        return false
    end
    if (not (R2I(RAbsBJ((GetUnitFacing(gg_unit_hrif_0227) - 90.00))) == 0)) then
        return false
    end
    return true
end

function Trig_Grave3_Actions()
    udg_ActiveGrave = gg_unit_hrif_0227
    BlzSetUnitFacingEx(udg_ActiveGrave, (GetUnitFacing(udg_ActiveGrave) + 45.00))
    if (Trig_Grave3_Func003C()) then
        DisableTrigger(gg_trg_Grave1)
        DisableTrigger(gg_trg_Grave2)
        DisableTrigger(gg_trg_Grave3)
        CreateNUnitsAtLoc(1, FourCC("hprt"), Player(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_Portal1_In), 270.00)
        PlaySoundBJ(gg_snd_UndeadDissipate2)
        SetUnitAnimation(GetLastCreatedUnit(), "birth")
        TriggerSleepAction(2.00)
        EnableTrigger(gg_trg_Portal1_Inn)
    else
    end
end

function InitTrig_Grave3()
    gg_trg_Grave3 = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Grave3, gg_rct_Grave3)
    TriggerAddCondition(gg_trg_Grave3, Condition(Trig_Grave3_Conditions))
    TriggerAddAction(gg_trg_Grave3, Trig_Grave3_Actions)
end

function Trig_RedKey_Actions()
    PlaySoundBJ(gg_snd_KelThuzadDeath1)
    TriggerSleepAction(2.00)
    CreateItemLoc(FourCC("I001"), GetUnitLoc(GetDyingUnit()))
end

function InitTrig_RedKey()
    gg_trg_RedKey = CreateTrigger()
    TriggerRegisterUnitEvent(gg_trg_RedKey, gg_unit_u000_0162, EVENT_UNIT_DEATH)
    TriggerAddAction(gg_trg_RedKey, Trig_RedKey_Actions)
end

function Trig_RedKeyDoor_Conditions()
    if (not (GetEnteringUnit() == gg_unit_Hpal_0002)) then
        return false
    end
    return true
end

function Trig_RedKeyDoor_Func001Func008C()
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 1)) == FourCC("I001")) then
        return true
    end
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 2)) == FourCC("I001")) then
        return true
    end
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 3)) == FourCC("I001")) then
        return true
    end
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 4)) == FourCC("I001")) then
        return true
    end
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 5)) == FourCC("I001")) then
        return true
    end
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 6)) == FourCC("I001")) then
        return true
    end
    return false
end

function Trig_RedKeyDoor_Func001C()
    if (not Trig_RedKeyDoor_Func001Func008C()) then
        return false
    end
    return true
end

function Trig_RedKeyDoor_Actions()
    if (Trig_RedKeyDoor_Func001C()) then
        DisableTrigger(GetTriggeringTrigger())
        KillDestructable(gg_dest_YTfb_8452)
        KillDestructable(gg_dest_YTfb_8453)
        KillDestructable(gg_dest_YTfb_8454)
        KillDestructable(gg_dest_YTfb_8523)
        SetDoodadAnimationRectBJ("death alternate", FourCC("D01N"), gg_rct_RedKeyDoor)
        PlaySoundBJ(gg_snd_BattleNetDoorsStereo2)
    else
    end
end

function InitTrig_RedKeyDoor()
    gg_trg_RedKeyDoor = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_RedKeyDoor, gg_rct_RedKeyDoor)
    TriggerAddCondition(gg_trg_RedKeyDoor, Condition(Trig_RedKeyDoor_Conditions))
    TriggerAddAction(gg_trg_RedKeyDoor, Trig_RedKeyDoor_Actions)
end

function Trig_BlueKey_Actions()
    PlaySoundBJ(gg_snd_KelThuzadDeath1)
    TriggerSleepAction(2.00)
    CreateItemLoc(FourCC("I002"), GetUnitLoc(GetDyingUnit()))
end

function InitTrig_BlueKey()
    gg_trg_BlueKey = CreateTrigger()
    TriggerRegisterUnitEvent(gg_trg_BlueKey, gg_unit_u001_0047, EVENT_UNIT_DEATH)
    TriggerAddAction(gg_trg_BlueKey, Trig_BlueKey_Actions)
end

function Trig_BlueKeyDoor_Conditions()
    if (not (GetEnteringUnit() == gg_unit_Hpal_0002)) then
        return false
    end
    return true
end

function Trig_BlueKeyDoor_Func001Func007C()
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 1)) == FourCC("I002")) then
        return true
    end
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 2)) == FourCC("I002")) then
        return true
    end
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 3)) == FourCC("I002")) then
        return true
    end
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 4)) == FourCC("I002")) then
        return true
    end
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 5)) == FourCC("I002")) then
        return true
    end
    if (GetItemTypeId(UnitItemInSlotBJ(udg_mainHero, 6)) == FourCC("I002")) then
        return true
    end
    return false
end

function Trig_BlueKeyDoor_Func001C()
    if (not Trig_BlueKeyDoor_Func001Func007C()) then
        return false
    end
    return true
end

function Trig_BlueKeyDoor_Actions()
    if (Trig_BlueKeyDoor_Func001C()) then
        DisableTrigger(GetTriggeringTrigger())
        KillDestructable(gg_dest_YTfb_10010)
        KillDestructable(gg_dest_YTfb_10009)
        KillDestructable(gg_dest_YTfb_10005)
        SetDoodadAnimationRectBJ("death alternate", FourCC("D01W"), gg_rct_BlueKeyDoor)
        PlaySoundBJ(gg_snd_BattleNetDoorsStereo2)
    else
    end
end

function InitTrig_BlueKeyDoor()
    gg_trg_BlueKeyDoor = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_BlueKeyDoor, gg_rct_BlueKeyDoor)
    TriggerAddCondition(gg_trg_BlueKeyDoor, Condition(Trig_BlueKeyDoor_Conditions))
    TriggerAddAction(gg_trg_BlueKeyDoor, Trig_BlueKeyDoor_Actions)
end

function Trig_Portal1_Inn_Conditions()
    if (not (GetEnteringUnit() == gg_unit_Hpal_0002)) then
        return false
    end
    return true
end

function Trig_Portal1_Inn_Actions()
    CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 0.10, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
    TriggerSleepAction(1.00)
    SetUnitPositionLocFacingBJ(gg_unit_Hpal_0002, GetRectCenter(gg_rct_Portal_2_Out), 90.00)
    CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 4.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
end

function InitTrig_Portal1_Inn()
    gg_trg_Portal1_Inn = CreateTrigger()
    DisableTrigger(gg_trg_Portal1_Inn)
    TriggerRegisterEnterRectSimple(gg_trg_Portal1_Inn, gg_rct_Portal1_In)
    TriggerAddCondition(gg_trg_Portal1_Inn, Condition(Trig_Portal1_Inn_Conditions))
    TriggerAddAction(gg_trg_Portal1_Inn, Trig_Portal1_Inn_Actions)
end

function Trig_Trap1_Func008A()
    ExplodeUnitBJ(GetEnumUnit())
end

function Trig_Trap1_Actions()
    DisableTrigger(GetTriggeringTrigger())
    SetDoodadAnimationRectBJ("death", FourCC("YOf1"), gg_rct_Trap1)
    DisableTrigger(gg_trg_Trap1_Damage)
    TriggerSleepAction(2)
    SetDoodadAnimationRectBJ("stand", FourCC("YOf1"), gg_rct_Trap1)
    EnableTrigger(GetTriggeringTrigger())
    EnableTrigger(gg_trg_Trap1_Damage)
    ForGroupBJ(GetUnitsInRectAll(gg_rct_Trap1), Trig_Trap1_Func008A)
end

function InitTrig_Trap1()
    gg_trg_Trap1 = CreateTrigger()
    TriggerRegisterTimerEventPeriodic(gg_trg_Trap1, 2)
    TriggerAddAction(gg_trg_Trap1, Trig_Trap1_Actions)
end

function Trig_Trap1_Damage_Actions()
    ExplodeUnitBJ(GetEnteringUnit())
end

function InitTrig_Trap1_Damage()
    gg_trg_Trap1_Damage = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Trap1_Damage, gg_rct_Trap1)
    TriggerAddAction(gg_trg_Trap1_Damage, Trig_Trap1_Damage_Actions)
end

function Trig_Trap2_Func008A()
    ExplodeUnitBJ(GetEnumUnit())
end

function Trig_Trap2_Actions()
    DisableTrigger(GetTriggeringTrigger())
    SetDoodadAnimationRectBJ("death", FourCC("YOf1"), gg_rct_Trap2)
    DisableTrigger(gg_trg_Trap2_Damage)
    TriggerSleepAction(2.50)
    SetDoodadAnimationRectBJ("stand", FourCC("YOf1"), gg_rct_Trap2)
    EnableTrigger(GetTriggeringTrigger())
    EnableTrigger(gg_trg_Trap2_Damage)
    ForGroupBJ(GetUnitsInRectAll(gg_rct_Trap2), Trig_Trap2_Func008A)
end

function InitTrig_Trap2()
    gg_trg_Trap2 = CreateTrigger()
    TriggerRegisterTimerEventPeriodic(gg_trg_Trap2, 3.00)
    TriggerAddAction(gg_trg_Trap2, Trig_Trap2_Actions)
end

function Trig_Trap2_Damage_Actions()
    ExplodeUnitBJ(GetEnteringUnit())
end

function InitTrig_Trap2_Damage()
    gg_trg_Trap2_Damage = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Trap2_Damage, gg_rct_Trap2)
    TriggerAddAction(gg_trg_Trap2_Damage, Trig_Trap2_Damage_Actions)
end

function Trig_Trap3_Func008A()
    ExplodeUnitBJ(GetEnumUnit())
end

function Trig_Trap3_Actions()
    DisableTrigger(GetTriggeringTrigger())
    SetDoodadAnimationRectBJ("death", FourCC("YOf1"), gg_rct_Trap3)
    DisableTrigger(gg_trg_Trap3_Damage)
    TriggerSleepAction(2.00)
    SetDoodadAnimationRectBJ("stand", FourCC("YOf1"), gg_rct_Trap3)
    EnableTrigger(GetTriggeringTrigger())
    EnableTrigger(gg_trg_Trap3_Damage)
    ForGroupBJ(GetUnitsInRectAll(gg_rct_Trap2), Trig_Trap3_Func008A)
end

function InitTrig_Trap3()
    gg_trg_Trap3 = CreateTrigger()
    TriggerRegisterTimerEventPeriodic(gg_trg_Trap3, 1.00)
    TriggerAddAction(gg_trg_Trap3, Trig_Trap3_Actions)
end

function Trig_Trap3_Damage_Actions()
    ExplodeUnitBJ(GetEnteringUnit())
end

function InitTrig_Trap3_Damage()
    gg_trg_Trap3_Damage = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Trap3_Damage, gg_rct_Trap2)
    TriggerAddAction(gg_trg_Trap3_Damage, Trig_Trap3_Damage_Actions)
end

function Trig_Button_Yard_Actions()
    PlaySoundBJ(gg_snd_tremblement)
    CameraSetEQNoiseForPlayer(Player(0), 2.00)
    SetDestructableAnimationBJ(gg_dest_DTfx_10185, "stand alternate")
    TriggerSleepAction(4.00)
    CameraClearNoiseForPlayer(Player(0))
    DestructableRestoreLife(gg_dest_B004_10353, GetDestructableMaxLife(GetLastCreatedDestructable()), true)
    DisableTrigger(GetTriggeringTrigger())
end

function InitTrig_Button_Yard()
    gg_trg_Button_Yard = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Button_Yard, gg_rct_Button_yard)
    TriggerAddAction(gg_trg_Button_Yard, Trig_Button_Yard_Actions)
end

function Trig_RemoveDark_Conditions()
    if (not (GetUnitTypeId(GetEnteringUnit()) == FourCC("nrat"))) then
        return false
    end
    if (not (GetOwningPlayer(GetEnteringUnit()) == Player(0))) then
        return false
    end
    return true
end

function Trig_RemoveDark_Actions()
    RemoveDestructable(gg_dest_B004_10353)
    DisableTrigger(GetTriggeringTrigger())
end

function InitTrig_RemoveDark()
    gg_trg_RemoveDark = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_RemoveDark, gg_rct_Rat_In)
    TriggerAddCondition(gg_trg_RemoveDark, Condition(Trig_RemoveDark_Conditions))
    TriggerAddAction(gg_trg_RemoveDark, Trig_RemoveDark_Actions)
end

function Trig_Button_1_Copy_Conditions()
    if (not (GetEnteringUnit() == gg_unit_Hpal_0002)) then
        return false
    end
    return true
end

function Trig_Button_1_Copy_Actions()
    DisableTrigger(GetTriggeringTrigger())
    TriggerSleepAction(1.00)
    PlaySoundBJ(gg_snd_PeonPissed4)
    ResetUnitAnimation(gg_unit_opeo_0070)
    SetUnitFacingToFaceUnitTimed(gg_unit_opeo_0070, gg_unit_Hpal_0002, 2.00)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), gg_unit_opeo_0070, "TRIGSTR_232", nil, "TRIGSTR_233", bj_TIMETYPE_ADD, 0, true)
    SetUnitLookAt(gg_unit_opeo_0070, "bone_head", gg_unit_Hpal_0002, 0, 0, 90)
    TriggerSleepAction(3.00)
    CreateItemLoc(FourCC("manh"), GetUnitLoc(gg_unit_opeo_0070))
    IssueTargetOrderBJ(gg_unit_obot_0077, "load", gg_unit_opeo_0070)
    PlaySoundBJ(gg_snd_PeonPissed3)
    TriggerSleepAction(1.00)
    IssuePointOrderLocBJ(gg_unit_obot_0077, "move", GetRectCenter(gg_rct_BergiFinish))
end

function InitTrig_Button_1_Copy()
    gg_trg_Button_1_Copy = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Button_1_Copy, gg_rct_Bergi_Run_Away)
    TriggerAddCondition(gg_trg_Button_1_Copy, Condition(Trig_Button_1_Copy_Conditions))
    TriggerAddAction(gg_trg_Button_1_Copy, Trig_Button_1_Copy_Actions)
end

function Trig_Rabbits_Conditions()
    if (not (GetUnitTypeId(GetEnteringUnit()) == FourCC("Hpal"))) then
        return false
    end
    return true
end

function Trig_Rabbits_Func003A()
    ExplodeUnitBJ(GetEnumUnit())
end

function Trig_Rabbits_Actions()
    DisableTrigger(GetTriggeringTrigger())
    ForGroupBJ(GetUnitsInRectOfPlayer(gg_rct_Region_016, Player(PLAYER_NEUTRAL_PASSIVE)), Trig_Rabbits_Func003A)
    TriggerSleepAction(0.25)
    TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_225", nil, ("Never liked rabbits. C u, " .. GetPlayerName(Player(0))), bj_TIMETYPE_ADD, 0, true)
    CreateNUnitsAtLoc(1, FourCC("n001"), Player(PLAYER_NEUTRAL_PASSIVE), GetRectCenter(gg_rct_KotoBogPortal), 338.00)
    SetUnitAnimation(GetLastCreatedUnit(), "birth")
    TriggerSleepAction(1.00)
    IssuePointOrderLocBJ(gg_unit_n000_0032, "move", GetRectCenter(gg_rct_KotoBogPortal))
end

function InitTrig_Rabbits()
    gg_trg_Rabbits = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Rabbits, gg_rct_Region_016)
    TriggerAddCondition(gg_trg_Rabbits, Condition(Trig_Rabbits_Conditions))
    TriggerAddAction(gg_trg_Rabbits, Trig_Rabbits_Actions)
end

function Trig_RabbitsEnd_Conditions()
    if (not (GetEnteringUnit() == gg_unit_n000_0032)) then
        return false
    end
    return true
end

function Trig_RabbitsEnd_Actions()
    DisableTrigger(GetTriggeringTrigger())
    SetUnitPositionLoc(gg_unit_n000_0032, GetRectCenter(gg_rct_Region_018))
    TriggerSleepAction(0.25)
    KillUnit(GetLastCreatedUnit())
    TriggerSleepAction(0.25)
    CreateItemLoc(FourCC("manh"), GetRectCenter(gg_rct_KotoBogPortal))
end

function InitTrig_RabbitsEnd()
    gg_trg_RabbitsEnd = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_RabbitsEnd, gg_rct_KotoBogPortal)
    TriggerAddCondition(gg_trg_RabbitsEnd, Condition(Trig_RabbitsEnd_Conditions))
    TriggerAddAction(gg_trg_RabbitsEnd, Trig_RabbitsEnd_Actions)
end

function Trig_KotoBog_Conditions()
    if (not (GetTriggerUnit() == gg_unit_n000_0032)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func003C()
    if (not (udg_Cat == 0)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func004C()
    if (not (udg_Cat == 1)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func005C()
    if (not (udg_Cat == 2)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func006C()
    if (not (udg_Cat == 3)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func007C()
    if (not (udg_Cat == 4)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func008C()
    if (not (udg_Cat == 5)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func009C()
    if (not (udg_Cat == 6)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func010C()
    if (not (udg_Cat == 7)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func011C()
    if (not (udg_Cat == 8)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func012C()
    if (not (udg_Cat == 9)) then
        return false
    end
    return true
end

function Trig_KotoBog_Func013C()
    if (not (udg_Cat == 15)) then
        return false
    end
    return true
end

function Trig_KotoBog_Actions()
    PlaySoundBJ(gg_snd_cat_y)
    DisableTrigger(GetTriggeringTrigger())
    if (Trig_KotoBog_Func003C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_203", nil, "TRIGSTR_204", bj_TIMETYPE_ADD, 0, true)
    else
    end
    if (Trig_KotoBog_Func004C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_205", nil, "TRIGSTR_206", bj_TIMETYPE_ADD, 0, true)
    else
    end
    if (Trig_KotoBog_Func005C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_207", nil, "TRIGSTR_208", bj_TIMETYPE_ADD, 0, true)
    else
    end
    if (Trig_KotoBog_Func006C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_209", nil, "TRIGSTR_210", bj_TIMETYPE_ADD, 0, true)
    else
    end
    if (Trig_KotoBog_Func007C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_211", nil, "TRIGSTR_212", bj_TIMETYPE_ADD, 0, true)
    else
    end
    if (Trig_KotoBog_Func008C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_213", nil, "TRIGSTR_214", bj_TIMETYPE_ADD, 0, true)
    else
    end
    if (Trig_KotoBog_Func009C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_215", nil, "TRIGSTR_216", bj_TIMETYPE_ADD, 0, true)
    else
    end
    if (Trig_KotoBog_Func010C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_217", nil, "TRIGSTR_218", bj_TIMETYPE_ADD, 0, true)
    else
    end
    if (Trig_KotoBog_Func011C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_219", nil, "TRIGSTR_220", bj_TIMETYPE_ADD, 0, true)
    else
    end
    if (Trig_KotoBog_Func012C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_221", nil, "TRIGSTR_222", bj_TIMETYPE_ADD, 0, true)
    else
    end
    if (Trig_KotoBog_Func013C()) then
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_223", nil, "TRIGSTR_224", bj_TIMETYPE_ADD, 0, true)
        SetUnitPositionLoc(gg_unit_H000_0004, GetRectCenter(gg_rct_Intro_Trap))
    else
    end
    TriggerSleepAction(2)
    udg_Cat = (udg_Cat + 1)
    EnableTrigger(GetTriggeringTrigger())
end

function InitTrig_KotoBog()
    gg_trg_KotoBog = CreateTrigger()
    TriggerRegisterPlayerSelectionEventBJ(gg_trg_KotoBog, Player(0), true)
    TriggerAddCondition(gg_trg_KotoBog, Condition(Trig_KotoBog_Conditions))
    TriggerAddAction(gg_trg_KotoBog, Trig_KotoBog_Actions)
end

function Trig_SelectHero_Conditions()
    if (not (GetTriggerUnit() ~= udg_mainHero)) then
        return false
    end
    return true
end

function Trig_SelectHero_Actions()
    ClearSelectionForPlayer(Player(0))
    SelectUnitAddForPlayer(udg_mainHero, Player(0))
end

function InitTrig_SelectHero()
    gg_trg_SelectHero = CreateTrigger()
    TriggerRegisterPlayerSelectionEventBJ(gg_trg_SelectHero, Player(0), true)
    TriggerAddCondition(gg_trg_SelectHero, Condition(Trig_SelectHero_Conditions))
    TriggerAddAction(gg_trg_SelectHero, Trig_SelectHero_Actions)
end

function Trig_Revive_victim_Conditions()
    if (not (GetUnitTypeId(GetDyingUnit()) == FourCC("nvlw"))) then
        return false
    end
    return true
end

function Trig_Revive_victim_Actions()
    TriggerSleepAction(60.00)
    CreateNUnitsAtLoc(1, FourCC("u006"), Player(PLAYER_NEUTRAL_AGGRESSIVE), GetUnitLoc(GetDyingUnit()), bj_UNIT_FACING)
end

function InitTrig_Revive_victim()
    gg_trg_Revive_victim = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Revive_victim, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Revive_victim, Condition(Trig_Revive_victim_Conditions))
    TriggerAddAction(gg_trg_Revive_victim, Trig_Revive_victim_Actions)
end

function Trig_Cry_Func002C()
    if (GetUnitTypeId(GetEnteringUnit()) == FourCC("Hpal")) then
        return true
    end
    if (GetUnitTypeId(GetEnteringUnit()) == FourCC("Edmm")) then
        return true
    end
    return false
end

function Trig_Cry_Conditions()
    if (not Trig_Cry_Func002C()) then
        return false
    end
    return true
end

function Trig_Cry_Func001Func002001001002()
    return (GetUnitTypeId(GetFilterUnit()) == FourCC("nvlw"))
end

function Trig_Cry_Func001C()
    if (not (CountUnitsInGroup(GetUnitsInRectMatching(GetCurrentCameraBoundsMapRectBJ(), Condition(Trig_Cry_Func001Func002001001002))) > 0)) then
        return false
    end
    return true
end

function Trig_Cry_Actions()
    if (Trig_Cry_Func001C()) then
        PlaySoundBJ(gg_snd_Cry)
    else
    end
end

function InitTrig_Cry()
    gg_trg_Cry = CreateTrigger()
    TriggerRegisterEnterRectSimple(gg_trg_Cry, gg_rct_Cry1)
    TriggerRegisterEnterRectSimple(gg_trg_Cry, gg_rct_Cry2)
    TriggerRegisterEnterRectSimple(gg_trg_Cry, gg_rct_Cry3)
    TriggerRegisterEnterRectSimple(gg_trg_Cry, gg_rct_Cry4)
    TriggerAddCondition(gg_trg_Cry, Condition(Trig_Cry_Conditions))
    TriggerAddAction(gg_trg_Cry, Trig_Cry_Actions)
end

function Trig_Kain_Laugh_Conditions()
    if (not (GetKillingUnitBJ() == gg_unit_Hpal_0002)) then
        return false
    end
    return true
end

function Trig_Kain_Laugh_Func003C()
    if (not (udg_Random == 1)) then
        return false
    end
    return true
end

function Trig_Kain_Laugh_Actions()
    DisableTrigger(GetTriggeringTrigger())
    udg_Random = GetRandomInt(1, 4)
    if (Trig_Kain_Laugh_Func003C()) then
        PlaySoundBJ(gg_snd_SoundsKainLaugh)
    else
    end
    EnableTrigger(GetTriggeringTrigger())
end

function InitTrig_Kain_Laugh()
    gg_trg_Kain_Laugh = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Kain_Laugh, EVENT_PLAYER_UNIT_DEATH)
    TriggerAddCondition(gg_trg_Kain_Laugh, Condition(Trig_Kain_Laugh_Conditions))
    TriggerAddAction(gg_trg_Kain_Laugh, Trig_Kain_Laugh_Actions)
end

function Trig_Enemy_Scream_Func005C()
    if (GetUnitTypeId(GetAttacker()) == FourCC("hfoo")) then
        return true
    end
    if (GetUnitTypeId(GetAttacker()) == FourCC("h002")) then
        return true
    end
    return false
end

function Trig_Enemy_Scream_Conditions()
    if (not Trig_Enemy_Scream_Func005C()) then
        return false
    end
    return true
end

function Trig_Enemy_Scream_Func003C()
    if (not (udg_Random == 1)) then
        return false
    end
    return true
end

function Trig_Enemy_Scream_Actions()
    DisableTrigger(GetTriggeringTrigger())
    udg_Random = GetRandomInt(1, 5)
    if (Trig_Enemy_Scream_Func003C()) then
        PlaySoundBJ(gg_snd_Enemy)
    else
    end
    EnableTrigger(GetTriggeringTrigger())
end

function InitTrig_Enemy_Scream()
    gg_trg_Enemy_Scream = CreateTrigger()
    TriggerRegisterAnyUnitEventBJ(gg_trg_Enemy_Scream, EVENT_PLAYER_UNIT_ATTACKED)
    TriggerAddCondition(gg_trg_Enemy_Scream, Condition(Trig_Enemy_Scream_Conditions))
    TriggerAddAction(gg_trg_Enemy_Scream, Trig_Enemy_Scream_Actions)
end

function Trig_SkipIntro_Actions()
    SetUnitOwner(gg_unit_Hpal_0002, Player(0), true)
    SelectUnitForPlayerSingle(gg_unit_Hpal_0002, Player(0))
    SetUnitPositionLoc(gg_unit_Hpal_0002, GetRectCenter(gg_rct_KainStart))
    udg_mainHero = gg_unit_Hpal_0002
        mainHero=udg_mainHero
end

function InitTrig_SkipIntro()
    gg_trg_SkipIntro = CreateTrigger()
    TriggerRegisterPlayerChatEvent(gg_trg_SkipIntro, Player(0), "skip", true)
    TriggerRegisterPlayerChatEvent(gg_trg_SkipIntro, Player(0), "-skip", true)
    TriggerRegisterPlayerChatEvent(gg_trg_SkipIntro, Player(0), "s", true)
    TriggerRegisterPlayerChatEvent(gg_trg_SkipIntro, Player(0), "", true)
    TriggerAddAction(gg_trg_SkipIntro, Trig_SkipIntro_Actions)
end

function Trig_Fixed_Camera_Actions()
    SetCameraTargetControllerNoZForPlayer(Player(0), udg_mainHero, 0, 150.00, false)
    SetCameraFieldForPlayer(Player(0), CAMERA_FIELD_ROTATION, 90.00, 0.05)
    SetCameraFieldForPlayer(Player(0), CAMERA_FIELD_TARGET_DISTANCE, 1650.00, 0.05)
    SetCameraFieldForPlayer(Player(0), CAMERA_FIELD_ANGLE_OF_ATTACK, 300.00, 0.05)
end

function InitTrig_Fixed_Camera()
    gg_trg_Fixed_Camera = CreateTrigger()
    TriggerRegisterTimerEventPeriodic(gg_trg_Fixed_Camera, 0.05)
    TriggerAddAction(gg_trg_Fixed_Camera, Trig_Fixed_Camera_Actions)
end

function Trig_Kain_Dies_Func001C()
    if (not (GetPlayerState(Player(0), PLAYER_STATE_RESOURCE_LUMBER) == 0)) then
        return false
    end
    return true
end

function Trig_Kain_Dies_Actions()
    if (Trig_Kain_Dies_Func001C()) then
        CustomDefeatBJ(Player(0), "TRIGSTR_226")
    else
        DisableTrigger(gg_trg_LightDamage)
        CinematicFadeBJ(bj_CINEFADETYPE_FADEOUT, 2, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
        TriggerSleepAction(4.00)
        SetTerrainFogExBJ(0, 0.00, 2000.00, 0, 0.00, 0.00, 0.00)
        ReviveHeroLoc(gg_unit_Hpal_0002, GetRectCenter(gg_rct_KainStart), true)
        SelectUnitForPlayerSingle(gg_unit_Hpal_0002, Player(0))
        SetPlayerStateBJ(Player(0), PLAYER_STATE_RESOURCE_LUMBER, (GetPlayerState(Player(0), PLAYER_STATE_RESOURCE_LUMBER) - 1))
        SetCameraTargetControllerNoZForPlayer(Player(0), gg_unit_Hpal_0002, 0, 250.00, false)
        CinematicFadeBJ(bj_CINEFADETYPE_FADEIN, 5.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0)
        PlaySoundBJ(gg_snd_KainRessurect)
        TransmissionFromUnitWithNameBJ(GetPlayersAll(), nil, "TRIGSTR_246", nil, "TRIGSTR_247", bj_TIMETYPE_ADD, 0, true)
    end
end

function InitTrig_Kain_Dies()
    gg_trg_Kain_Dies = CreateTrigger()
    TriggerRegisterUnitEvent(gg_trg_Kain_Dies, gg_unit_Hpal_0002, EVENT_UNIT_DEATH)
    TriggerAddAction(gg_trg_Kain_Dies, Trig_Kain_Dies_Actions)
end

function Trig_Init_Actions()
    SetUnitAnimationWithRarity(gg_unit_n000_0032, "sleep", RARITY_RARE)
    SetUnitAnimationWithRarity(gg_unit_ninf_0197, "death", RARITY_RARE)
    SetUnitAnimationWithRarity(gg_unit_opeo_0070, "stand work", RARITY_RARE)
    SetDoodadAnimationRectBJ("death alternate", FourCC("D001"), gg_rct_DoorwayOpen)
    SetDoodadAnimationRectBJ("death alternate", FourCC("D001"), gg_rct_DoorwayOpen2)
    SetDoodadAnimationRectBJ("death alternate", FourCC("D001"), gg_rct_DoorwayOpen3)
    SetDoodadAnimationRectBJ("death alternate", FourCC("D001"), gg_rct_DoorwayOpen4)
    SetDoodadAnimationRectBJ("hide", FourCC("DObw"), gg_rct_LibraryOpen)
    SetDoodadAnimationRectBJ("death", FourCC("YOsw"), gg_rct_Cinematic_1)
    AddUnitAnimationPropertiesBJ(true, "cinematic", gg_unit_hpea_0000)
    KillDestructable(gg_dest_YY13_0211)
    KillDestructable(gg_dest_YY16_3714)
    KillDestructable(gg_dest_CTtc_0212)
    CreateQuestBJ(bj_QUESTTYPE_REQ_DISCOVERED, "TRIGSTR_242", "TRIGSTR_243", "ReplaceableTextures\\CommandButtons\\BTNSentinel.blp")
    udg_QuestIntro = GetLastCreatedQuestBJ()
    UseTimeOfDayBJ(false)
    SetPlayerFlagBJ(PLAYER_STATE_GIVES_BOUNTY, false, Player(PLAYER_NEUTRAL_AGGRESSIVE))
    udg_mainHero = gg_unit_H000_0004
    IssuePointOrderLocBJ(gg_unit_hpea_0000, "patrol", GetRectCenter(gg_rct_Barkeep_walk))
end

function InitTrig_Init()
    gg_trg_Init = CreateTrigger()
    TriggerAddAction(gg_trg_Init, Trig_Init_Actions)
end

function InitCustomTriggers()
    InitTrig_Tips_1()
    InitTrig_Tips_2()
    InitTrig_Tips_3()
    InitTrig_Intro_1()
    InitTrig_Intro_2()
    InitTrig_Intro_3()
    InitTrig_Intro_4()
    InitTrig_CinematicStart()
    InitTrig_Closed1()
    InitTrig_RatKey()
    InitTrig_RatKAggro()
    InitTrig_Open_Pass_1()
    InitTrig_Key1()
    InitTrig_Key2()
    InitTrig_Key3()
    InitTrig_LightOn()
    InitTrig_LightOff()
    InitTrig_LightDamage()
    InitTrig_Button_1()
    InitTrig_Button_2()
    InitTrig_Button_3()
    InitTrig_Grave1()
    InitTrig_Grave2()
    InitTrig_Grave3()
    InitTrig_RedKey()
    InitTrig_RedKeyDoor()
    InitTrig_BlueKey()
    InitTrig_BlueKeyDoor()
    InitTrig_Portal1_Inn()
    InitTrig_Trap1()
    InitTrig_Trap1_Damage()
    InitTrig_Trap2()
    InitTrig_Trap2_Damage()
    InitTrig_Trap3()
    InitTrig_Trap3_Damage()
    InitTrig_Button_Yard()
    InitTrig_RemoveDark()
    InitTrig_Button_1_Copy()
    InitTrig_Rabbits()
    InitTrig_RabbitsEnd()
    InitTrig_KotoBog()
    InitTrig_SelectHero()
    InitTrig_Revive_victim()
    InitTrig_Cry()
    InitTrig_Kain_Laugh()
    InitTrig_Enemy_Scream()
    InitTrig_SkipIntro()
    InitTrig_Fixed_Camera()
    InitTrig_Kain_Dies()
    InitTrig_Init()
end

function RunInitializationTriggers()
    ConditionalTriggerExecute(gg_trg_Intro_1)
    ConditionalTriggerExecute(gg_trg_Init)
end

function InitCustomPlayerSlots()
    SetPlayerStartLocation(Player(0), 0)
    SetPlayerColor(Player(0), ConvertPlayerColor(0))
    SetPlayerRacePreference(Player(0), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(0), false)
    SetPlayerController(Player(0), MAP_CONTROL_USER)
    SetPlayerStartLocation(Player(11), 1)
    SetPlayerColor(Player(11), ConvertPlayerColor(11))
    SetPlayerRacePreference(Player(11), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(11), false)
    SetPlayerController(Player(11), MAP_CONTROL_COMPUTER)
    SetPlayerStartLocation(Player(20), 2)
    SetPlayerColor(Player(20), ConvertPlayerColor(20))
    SetPlayerRacePreference(Player(20), RACE_PREF_HUMAN)
    SetPlayerRaceSelectable(Player(20), false)
    SetPlayerController(Player(20), MAP_CONTROL_COMPUTER)
end

function InitCustomTeams()
    SetPlayerTeam(Player(0), 0)
    SetPlayerTeam(Player(20), 0)
    SetPlayerAllianceStateAllyBJ(Player(0), Player(20), true)
    SetPlayerAllianceStateAllyBJ(Player(20), Player(0), true)
    SetPlayerAllianceStateVisionBJ(Player(0), Player(20), true)
    SetPlayerAllianceStateVisionBJ(Player(20), Player(0), true)
    SetPlayerTeam(Player(11), 1)
end

function main()
    SetCameraBounds(-7168.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), -3584.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 12544.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 15360.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -7168.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 15360.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 12544.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), -3584.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM))
    SetDayNightModels("Environment\\DNC\\DNCFelwood\\DNCFelwoodTerrain\\DNCFelwoodTerrain.mdl", "Environment\\DNC\\DNCFelwood\\DNCFelwoodUnit\\DNCFelwoodUnit.mdl")
    SetTerrainFogEx(0, 0.0, 2000.0, 0.500, 0.000, 0.000, 0.098)
    SetWaterBaseColor(150, 200, 100, 255)
    NewSoundEnvironment("Default")
    SetAmbientDaySound("AshenvaleDay")
    SetAmbientNightSound("AshenvaleNight")
    SetMapMusic("Music", true, 0)
    InitSounds()
    CreateRegions()
    CreateCameras()
    CreateAllDestructables()
    CreateAllItems()
    CreateAllUnits()
    InitBlizzard()
    InitGlobals()
    InitCustomTriggers()
    RunInitializationTriggers()
end

function config()
    SetMapName("TRIGSTR_001")
    SetMapDescription("TRIGSTR_003")
    SetPlayers(3)
    SetTeams(3)
    SetGamePlacement(MAP_PLACEMENT_USE_MAP_SETTINGS)
    DefineStartLocation(0, 6016.0, 4224.0)
    DefineStartLocation(1, 768.0, -896.0)
    DefineStartLocation(2, -256.0, 3200.0)
    InitCustomPlayerSlots()
    InitCustomTeams()
end

